<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Bootstrap Engine: C:/Bootstrap/ProjectBX/Documentation/Code/Engine/Graphics/GrTextureStage.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>C:/Bootstrap/ProjectBX/Documentation/Code/Engine/Graphics/GrTextureStage.cpp</h1><a href="_gr_texture_stage_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//----------------------------------------------------------</span>
<a name="l00006"></a>00006 <span class="comment"></span><span class="comment">//----------------------------------------------------------</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include "<a class="code" href="graphics__afx_8h.html">graphics_afx.h</a>"</span>
<a name="l00008"></a>00008 
<a name="l00010"></a>00010 <span class="preprocessor">#include "<a class="code" href="_gr_texture_stage_8h.html">GrTextureStage.h</a>"</span>
<a name="l00011"></a>00011 
<a name="l00013"></a>00013 <span class="preprocessor">#include "<a class="code" href="_gr_texture_base_8h.html">GrTextureBase.h</a>"</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include "<a class="code" href="_u_expr_term_8h.html">UExprTerm.h</a>"</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include "<a class="code" href="_g_l_subsys_8h.html">GLSubsys.h</a>"</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include "<a class="code" href="_gr_texture_mgr_8h.html">GrTextureMgr.h</a>"</span>
<a name="l00017"></a>00017 
<a name="l00019"></a>00019 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="_g_l_8h.html#5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _filterMap[ <a class="code" href="enums_8h.html#697c1ee1354746841860d5bf9f81c033bfb5dc4b6ee1d1f5d0b224995dd28093">EGQ_COUNT</a> ][ <a class="code" href="class_gr_texture_stage.html#b86144a2e97311bb975db7c2c361f04870914660843541078f1353358799457e">GrTextureStage::EFM_COUNT</a> ][ 2 ] =
<a name="l00020"></a>00020 {
<a name="l00022"></a>00022         {
<a name="l00023"></a>00023                 {       <a class="code" href="_g_l_8h.html#724edc4d9d6f3c1770ff3688f0747acb">GL_LINEAR_MIPMAP_LINEAR</a>, <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>,             },      
<a name="l00024"></a>00024                 {       <a class="code" href="_g_l_8h.html#724edc4d9d6f3c1770ff3688f0747acb">GL_LINEAR_MIPMAP_LINEAR</a>, <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>,             },      
<a name="l00025"></a>00025                 {       <a class="code" href="_g_l_8h.html#9fba5da0aafd194b7eb2fcd359511622">GL_LINEAR_MIPMAP_NEAREST</a>, <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>,    },      
<a name="l00026"></a>00026                 {       <a class="code" href="_g_l_8h.html#318a0c53e89e0bc5fdd162a405f77a9d">GL_NEAREST_MIPMAP_NEAREST</a>, <a class="code" href="_g_l_8h.html#7ec02582a9b1c390908a2230c8e26c0b">GL_NEAREST</a>,  },      
<a name="l00027"></a>00027         },
<a name="l00028"></a>00028 
<a name="l00030"></a>00030         {
<a name="l00031"></a>00031                 {       <a class="code" href="_g_l_8h.html#724edc4d9d6f3c1770ff3688f0747acb">GL_LINEAR_MIPMAP_LINEAR</a>, <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>,             },      
<a name="l00032"></a>00032                 {       <a class="code" href="_g_l_8h.html#724edc4d9d6f3c1770ff3688f0747acb">GL_LINEAR_MIPMAP_LINEAR</a>, <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>,             },      
<a name="l00033"></a>00033                 {       <a class="code" href="_g_l_8h.html#9fba5da0aafd194b7eb2fcd359511622">GL_LINEAR_MIPMAP_NEAREST</a>, <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>,    },      
<a name="l00034"></a>00034                 {       <a class="code" href="_g_l_8h.html#318a0c53e89e0bc5fdd162a405f77a9d">GL_NEAREST_MIPMAP_NEAREST</a>, <a class="code" href="_g_l_8h.html#7ec02582a9b1c390908a2230c8e26c0b">GL_NEAREST</a>,  },      
<a name="l00035"></a>00035         },
<a name="l00036"></a>00036 
<a name="l00038"></a>00038         {
<a name="l00039"></a>00039                 {       <a class="code" href="_g_l_8h.html#724edc4d9d6f3c1770ff3688f0747acb">GL_LINEAR_MIPMAP_LINEAR</a>, <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>,             },      
<a name="l00040"></a>00040                 {       <a class="code" href="_g_l_8h.html#724edc4d9d6f3c1770ff3688f0747acb">GL_LINEAR_MIPMAP_LINEAR</a>, <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>,             },      
<a name="l00041"></a>00041                 {       <a class="code" href="_g_l_8h.html#9fba5da0aafd194b7eb2fcd359511622">GL_LINEAR_MIPMAP_NEAREST</a>, <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>,    },      
<a name="l00042"></a>00042                 {       <a class="code" href="_g_l_8h.html#318a0c53e89e0bc5fdd162a405f77a9d">GL_NEAREST_MIPMAP_NEAREST</a>, <a class="code" href="_g_l_8h.html#7ec02582a9b1c390908a2230c8e26c0b">GL_NEAREST</a>,  },      
<a name="l00043"></a>00043         },
<a name="l00044"></a>00044 
<a name="l00046"></a>00046         {
<a name="l00047"></a>00047                 {       <a class="code" href="_g_l_8h.html#724edc4d9d6f3c1770ff3688f0747acb">GL_LINEAR_MIPMAP_LINEAR</a>, <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>,             },      
<a name="l00048"></a>00048                 {       <a class="code" href="_g_l_8h.html#724edc4d9d6f3c1770ff3688f0747acb">GL_LINEAR_MIPMAP_LINEAR</a>, <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>,             },      
<a name="l00049"></a>00049                 {       <a class="code" href="_g_l_8h.html#9fba5da0aafd194b7eb2fcd359511622">GL_LINEAR_MIPMAP_NEAREST</a>, <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>,    },      
<a name="l00050"></a>00050                 {       <a class="code" href="_g_l_8h.html#318a0c53e89e0bc5fdd162a405f77a9d">GL_NEAREST_MIPMAP_NEAREST</a>, <a class="code" href="_g_l_8h.html#7ec02582a9b1c390908a2230c8e26c0b">GL_NEAREST</a>,  },      
<a name="l00051"></a>00051         },
<a name="l00052"></a>00052 };
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> _anisotropy[ 4 ] =
<a name="l00055"></a>00055 {
<a name="l00056"></a>00056         16.0f,          
<a name="l00057"></a>00057         4.0f,           
<a name="l00058"></a>00058         1.0f,           
<a name="l00059"></a>00059         1.0f,           
<a name="l00060"></a>00060 };
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> _mipBias[ 4 ] =
<a name="l00063"></a>00063 {
<a name="l00064"></a>00064         0,                      
<a name="l00065"></a>00065         0,                      
<a name="l00066"></a>00066         0,                      
<a name="l00067"></a>00067         0,                      
<a name="l00068"></a>00068 };
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _addressModeMap[ 3 ] =
<a name="l00071"></a>00071 {
<a name="l00072"></a>00072         <a class="code" href="_g_l_8h.html#a402fcab9f814ff88b2b19ca2823a594">GL_REPEAT</a>,
<a name="l00073"></a>00073         <a class="code" href="_g_l_8h.html#4552c48d4df9661fa173a189167c4816">GL_CLAMP</a>,
<a name="l00074"></a>00074 <span class="comment">//      GL_MIRROR_CLAMP_TO_EDGE_EXT,</span>
<a name="l00075"></a>00075 };
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="comment">//**********************************************************</span>
<a name="l00079"></a>00079 <span class="comment"></span><span class="comment">//**********************************************************</span>
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="comment">//==========================================================</span>
<a name="l00083"></a>00083 <span class="comment"></span><span class="comment">//==========================================================</span>
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="comment">//----------------------------------------------------------</span>
<a name="l00086"></a><a class="code" href="class_gr_texture_stage.html#eac3752fc6e0acac79696710b9eb0598">00086</a> <a class="code" href="class_gr_texture_stage.html#eac3752fc6e0acac79696710b9eb0598" title="class GrTextureStage">GrTextureStage::GrTextureStage</a>()
<a name="l00087"></a>00087 : _glMinFilter( <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a> )
<a name="l00088"></a>00088 , _glMagFilter( <a class="code" href="_g_l_8h.html#4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a> )
<a name="l00089"></a>00089 , _glAddressS( <a class="code" href="_g_l_8h.html#a402fcab9f814ff88b2b19ca2823a594">GL_REPEAT</a> )
<a name="l00090"></a>00090 , _glAddressT( <a class="code" href="_g_l_8h.html#a402fcab9f814ff88b2b19ca2823a594">GL_REPEAT</a> )
<a name="l00091"></a>00091 , _addressS( EAM_REPEAT )
<a name="l00092"></a>00092 , _addressT( EAM_REPEAT )
<a name="l00093"></a>00093 , _genTextureFlag( 0 )
<a name="l00094"></a>00094 , _texColorMod( 1.0, 1.0, 1.0, 1.0 )
<a name="l00095"></a>00095 , _texColorAdd( 0.0, 0.0, 0.0, 0.0 )
<a name="l00096"></a>00096 , _maxAnisotropy( 1.0f )
<a name="l00097"></a>00097 , _filterMode( EFM_BILINEAR )
<a name="l00098"></a>00098 , _mipMapEnable( true )
<a name="l00099"></a>00099 , _glModesDirty( true )
<a name="l00100"></a>00100 {
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 }
<a name="l00103"></a>00103 
<a name="l00104"></a>00104 <span class="comment">//----------------------------------------------------------</span>
<a name="l00105"></a><a class="code" href="class_gr_texture_stage.html#6378461758f772d3668fecbb8b9f133a">00105</a> <a class="code" href="class_gr_texture_stage.html#eac3752fc6e0acac79696710b9eb0598" title="class GrTextureStage">GrTextureStage::GrTextureStage</a>( <span class="keyword">const</span> <a class="code" href="class_gr_texture_stage.html" title="class GrTextureStage">GrTextureStage</a>&amp; stage )
<a name="l00106"></a>00106 {
<a name="l00107"></a>00107         Assign( stage );
<a name="l00108"></a>00108 }
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <span class="comment">//----------------------------------------------------------</span>
<a name="l00111"></a><a class="code" href="class_gr_texture_stage.html#ed8757fd8de2d75111b96aba86c1b195">00111</a> <a class="code" href="class_gr_texture_stage.html#ed8757fd8de2d75111b96aba86c1b195">GrTextureStage::~GrTextureStage</a>()
<a name="l00112"></a>00112 {
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 <span class="comment">//==========================================================</span>
<a name="l00119"></a>00119 <span class="comment"></span><span class="comment">//==========================================================</span>
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 <span class="comment">//----------------------------------------------------------</span>
<a name="l00122"></a>00122 <span class="keywordtype">void</span>
<a name="l00123"></a><a class="code" href="class_gr_texture_stage.html#d1c9b29aa390259ccc36d6f518502801">00123</a> <a class="code" href="class_gr_texture_stage.html#d1c9b29aa390259ccc36d6f518502801" title="public methods">GrTextureStage::SetTexture</a>( <a class="code" href="class_u_ref.html">URef&lt; GrTextureBase &gt;</a> <a class="code" href="glext_8h.html#8f486379aef534669f4f06f515e7ce6c">texture</a> )
<a name="l00124"></a>00124 {
<a name="l00125"></a>00125         <a class="code" href="common__afx_8h.html#2630490ce4292ed6d05359d2957796b8">B_ASSERT</a>( texture != 0 );
<a name="l00126"></a>00126         _texture = texture;
<a name="l00127"></a>00127         _glModesDirty = <span class="keyword">true</span>;   
<a name="l00128"></a>00128 }
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 <span class="comment">//----------------------------------------------------------</span>
<a name="l00131"></a>00131 <span class="keywordtype">void</span>
<a name="l00132"></a><a class="code" href="class_gr_texture_stage.html#bd3af2826c14f1e0bb6b93e9031f4294">00132</a> <a class="code" href="class_gr_texture_stage.html#bd3af2826c14f1e0bb6b93e9031f4294">GrTextureStage::SetAddressMode</a>( <a class="code" href="class_gr_texture_stage.html#dea63364bc3369d0cf5ef74b76268d0e">EADDRESSMODE</a> <a class="code" href="glext_8h.html#d585a1393cfa368fa9dc3d8ebff640d5">s</a>, <a class="code" href="class_gr_texture_stage.html#dea63364bc3369d0cf5ef74b76268d0e">EADDRESSMODE</a> <a class="code" href="glext_8h.html#00140d6f5c548b26daf170bf16e86a6d">t</a> )
<a name="l00133"></a>00133 {
<a name="l00135"></a>00135         _glAddressS = _addressModeMap[ s ];
<a name="l00136"></a>00136         _glAddressT = _addressModeMap[ t ];
<a name="l00137"></a>00137         _addressS = s;
<a name="l00138"></a>00138         _addressT = t;
<a name="l00139"></a>00139 }
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 <span class="comment">//----------------------------------------------------------</span>
<a name="l00142"></a>00142 <span class="keywordtype">void</span>
<a name="l00143"></a><a class="code" href="class_gr_texture_stage.html#f2d25544ef1026d7f705074db5c88902">00143</a> <a class="code" href="class_gr_texture_stage.html#f2d25544ef1026d7f705074db5c88902">GrTextureStage::SetFilterMode</a>( <a class="code" href="class_gr_texture_stage.html#b86144a2e97311bb975db7c2c361f048">EFILTERMODE</a> filterMode )
<a name="l00144"></a>00144 {
<a name="l00145"></a>00145         _glModesDirty = <span class="keyword">true</span>;
<a name="l00146"></a>00146         _filterMode = filterMode;
<a name="l00147"></a>00147 }
<a name="l00148"></a>00148 
<a name="l00149"></a>00149 <span class="comment">//----------------------------------------------------------</span>
<a name="l00150"></a>00150 <span class="keywordtype">void</span>
<a name="l00151"></a><a class="code" href="class_gr_texture_stage.html#fc6ffe941788ef5073fa2c7c80c4644a">00151</a> <a class="code" href="class_gr_texture_stage.html#fc6ffe941788ef5073fa2c7c80c4644a">GrTextureStage::SetMaxAnisotropy</a>( <span class="keywordtype">float</span> maxAnisotropy )
<a name="l00152"></a>00152 {
<a name="l00153"></a>00153         _maxAnisotropy = maxAnisotropy;
<a name="l00154"></a>00154 }
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 <span class="comment">//----------------------------------------------------------</span>
<a name="l00157"></a>00157 <span class="keywordtype">void</span>
<a name="l00158"></a><a class="code" href="class_gr_texture_stage.html#ed9af9744e9097a1745e1c9efda29141">00158</a> <a class="code" href="class_gr_texture_stage.html#ed9af9744e9097a1745e1c9efda29141">GrTextureStage::SetMipMapEnable</a>( <span class="keywordtype">bool</span> mipMapEnable )
<a name="l00159"></a>00159 {
<a name="l00160"></a>00160         _glModesDirty = <span class="keyword">true</span>;
<a name="l00161"></a>00161         _mipMapEnable = mipMapEnable;
<a name="l00162"></a>00162 }
<a name="l00163"></a>00163 
<a name="l00164"></a>00164 <span class="comment">//----------------------------------------------------------</span>
<a name="l00165"></a>00165 <span class="keywordtype">void</span>
<a name="l00166"></a><a class="code" href="class_gr_texture_stage.html#4656b7b3dca1699a7ed25f89c57c190e">00166</a> <a class="code" href="class_gr_texture_stage.html#4656b7b3dca1699a7ed25f89c57c190e">GrTextureStage::SetGenTextureFlag</a>( GenTextureFlag <a class="code" href="_u_t_message_8h.html#0a3c0b351ab09281b662a9ff4f900a53">flags</a> )
<a name="l00167"></a>00167 {
<a name="l00168"></a>00168         <a class="code" href="common__afx_8h.html#2630490ce4292ed6d05359d2957796b8">B_ASSERT</a>( <a class="code" href="common__afx_8h.html#57be1bf0723f638d0d40c91339bd6f05">IsPow2</a>( flags ) || flags == 0 );
<a name="l00169"></a>00169         _genTextureFlag = flags;
<a name="l00170"></a>00170 }
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 <span class="comment">//----------------------------------------------------------</span>
<a name="l00173"></a>00173 <span class="keywordtype">void</span>
<a name="l00174"></a><a class="code" href="class_gr_texture_stage.html#1803888bbf5d820f060465bd63bf88bd">00174</a> <a class="code" href="class_gr_texture_stage.html#1803888bbf5d820f060465bd63bf88bd">GrTextureStage::SetTexColorMod</a>( <span class="keyword">const</span> <a class="code" href="class_gr_color.html" title="class GrColor">GrColor</a>&amp; <a class="code" href="glext_8h.html#3ea846f998d64f079b86052b6c4193a8">color</a> )
<a name="l00175"></a>00175 {
<a name="l00176"></a>00176         _texColorMod = color;
<a name="l00177"></a>00177 }
<a name="l00178"></a>00178 
<a name="l00179"></a>00179 <span class="comment">//----------------------------------------------------------</span>
<a name="l00180"></a>00180 <span class="keywordtype">void</span>
<a name="l00181"></a><a class="code" href="class_gr_texture_stage.html#6dc007a985aac8227b9e445829d42756">00181</a> <a class="code" href="class_gr_texture_stage.html#6dc007a985aac8227b9e445829d42756">GrTextureStage::SetTexColorAdd</a>( <span class="keyword">const</span> <a class="code" href="class_gr_color.html" title="class GrColor">GrColor</a>&amp; <a class="code" href="glext_8h.html#3ea846f998d64f079b86052b6c4193a8">color</a> )
<a name="l00182"></a>00182 {
<a name="l00183"></a>00183         _texColorAdd = color;
<a name="l00184"></a>00184 }
<a name="l00185"></a>00185 
<a name="l00186"></a>00186 <span class="comment">//----------------------------------------------------------</span>
<a name="l00187"></a>00187 <a class="code" href="class_u_ref.html">URef&lt; GrTextureBase &gt;</a>
<a name="l00188"></a><a class="code" href="class_gr_texture_stage.html#89083b0faeed97261a4ae0feb512fc8b">00188</a> <a class="code" href="class_gr_texture_stage.html#89083b0faeed97261a4ae0feb512fc8b">GrTextureStage::GetTexture</a>()<span class="keyword"> const</span>
<a name="l00189"></a>00189 <span class="keyword"></span>{
<a name="l00190"></a>00190         <span class="keywordflow">return</span> _texture;
<a name="l00191"></a>00191 }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193 <span class="comment">//----------------------------------------------------------</span>
<a name="l00194"></a>00194 <span class="keywordtype">void</span>
<a name="l00195"></a><a class="code" href="class_gr_texture_stage.html#72dad18b9bc9adbad72138920b6e7fdf">00195</a> <a class="code" href="class_gr_texture_stage.html#72dad18b9bc9adbad72138920b6e7fdf" title="updates the texture matrix. Should be called once per frame.">GrTextureStage::Update</a>()<span class="keyword"> const</span>
<a name="l00196"></a>00196 <span class="keyword"></span>{
<a name="l00197"></a>00197 
<a name="l00198"></a>00198 }
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 <span class="comment">//----------------------------------------------------------</span>
<a name="l00201"></a>00201 <span class="keywordtype">void</span>
<a name="l00202"></a><a class="code" href="class_gr_texture_stage.html#f8e83134d46afc43e868f5069b065e29">00202</a> <a class="code" href="class_gr_texture_stage.html#f8e83134d46afc43e868f5069b065e29" title="applies the stage state to the GL.">GrTextureStage::ApplyShaderState</a>( <a class="code" href="class_gr_shader.html" title="Purpose: To load and manage a shader.">GrShader</a>* <a class="code" href="glext_8h.html#57b2a96adb1d51204909a82d861e395e">shader</a>, <a class="code" href="class_gr_shader.html#2f004c603bb97711d05eb68381a5a7ba" title="engine driven parameters.">GrShader::EPARAM</a> colorReg0, <a class="code" href="class_gr_shader.html#2f004c603bb97711d05eb68381a5a7ba" title="engine driven parameters.">GrShader::EPARAM</a> colorReg1 )<span class="keyword"> const</span>
<a name="l00203"></a>00203 <span class="keyword"></span>{
<a name="l00205"></a>00205         <a class="code" href="common__afx_8h.html#2630490ce4292ed6d05359d2957796b8">B_ASSERT</a>( shader != 0 );
<a name="l00206"></a>00206 
<a name="l00208"></a>00208         shader-&gt;<a class="code" href="class_gr_shader.html#151b6e0ff7c3e9fa37c5bc2498e752fe" title="renderer driven params.">SetEngineParam4fv</a>( colorReg0, _texColorMod );
<a name="l00209"></a>00209         shader-&gt;<a class="code" href="class_gr_shader.html#151b6e0ff7c3e9fa37c5bc2498e752fe" title="renderer driven params.">SetEngineParam4fv</a>( colorReg1, _texColorAdd );
<a name="l00210"></a>00210 }
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="comment">//----------------------------------------------------------</span>
<a name="l00213"></a>00213 <span class="keywordtype">void</span>
<a name="l00214"></a><a class="code" href="class_gr_texture_stage.html#485314fd955bae3e4b6c2c228381b8f6">00214</a> <a class="code" href="class_gr_texture_stage.html#485314fd955bae3e4b6c2c228381b8f6" title="binds the stage&amp;#39;s texture to the sampler specified.">GrTextureStage::BindTexture</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texUnit )<span class="keyword"> const</span>
<a name="l00215"></a>00215 <span class="keyword"></span>{
<a name="l00216"></a>00216         <a class="code" href="common__afx_8h.html#2630490ce4292ed6d05359d2957796b8">B_ASSERT</a>( texUnit &lt; 16 );
<a name="l00217"></a>00217 
<a name="l00219"></a>00219         <span class="keywordflow">if</span> ( !_texture )
<a name="l00220"></a>00220                 <span class="keywordflow">return</span>;
<a name="l00221"></a>00221 
<a name="l00223"></a>00223         <a class="code" href="enums_8h.html#697c1ee1354746841860d5bf9f81c033" title="standard quality enum">EGRQUALITY</a> texQual = <a class="code" href="_gr_texture_mgr_8cpp.html#51ad772529ca3df5a1d62836ace41d5c" title="singleton pointer.">gGrTextureMgr</a>-&gt;<a class="code" href="class_gr_texture_mgr.html#b9120a416ac73224fe76245e7083db19">GetTexturingQuality</a>();
<a name="l00224"></a>00224 
<a name="l00226"></a>00226         _glMagFilter = _filterMap[ texQual ][ _filterMode ][ 1 ];
<a name="l00227"></a>00227         <span class="keywordflow">if</span> ( _mipMapEnable &amp;&amp; !( _texture-&gt;GetFlags() &amp; <a class="code" href="class_gr_texture_base.html#47f4a8d764ba3c8e9e353a394edfcd2c">GrTextureBase::kNoMipMap</a> ) )
<a name="l00228"></a>00228                 _glMinFilter = _filterMap[ texQual ][ _filterMode ][ 0 ];
<a name="l00229"></a>00229         <span class="keywordflow">else</span>
<a name="l00230"></a>00230                 _glMinFilter = _glMagFilter;
<a name="l00231"></a>00231 
<a name="l00233"></a>00233         <span class="keywordtype">int</span> mipBias = _mipBias[ texQual ];
<a name="l00234"></a>00234 
<a name="l00236"></a>00236         _texture-&gt;Bind( texUnit, _glMinFilter, _glMagFilter, _glAddressS, _glAddressT, _anisotropy[ texQual ], mipBias );
<a name="l00237"></a>00237 }
<a name="l00238"></a>00238 
<a name="l00239"></a>00239 <span class="comment">//----------------------------------------------------------</span>
<a name="l00240"></a>00240 <a class="code" href="class_gr_texture_stage.html" title="class GrTextureStage">GrTextureStage</a>&amp;
<a name="l00241"></a><a class="code" href="class_gr_texture_stage.html#078a1d7c0fa18ab8a73bcad6ee5037ae">00241</a> <a class="code" href="class_gr_texture_stage.html#078a1d7c0fa18ab8a73bcad6ee5037ae" title="assignment operator.">GrTextureStage::operator = </a>( <span class="keyword">const</span> <a class="code" href="class_gr_texture_stage.html" title="class GrTextureStage">GrTextureStage</a>&amp; stage )
<a name="l00242"></a>00242 {
<a name="l00243"></a>00243         Assign( stage );
<a name="l00244"></a>00244         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00245"></a>00245 }
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 
<a name="l00248"></a>00248 <span class="comment">//==========================================================</span>
<a name="l00250"></a>00250 <span class="comment"></span><span class="comment">//==========================================================</span>
<a name="l00251"></a>00251 
<a name="l00252"></a>00252 <span class="comment">//----------------------------------------------------------</span>
<a name="l00253"></a>00253 <span class="keywordtype">void</span>
<a name="l00254"></a>00254 GrTextureStage::Assign( <span class="keyword">const</span> <a class="code" href="class_gr_texture_stage.html" title="class GrTextureStage">GrTextureStage</a>&amp; stage )
<a name="l00255"></a>00255 {
<a name="l00256"></a>00256         _texture = stage.<a class="code" href="class_gr_texture_stage.html#f50737aa4eb5a57ae97b592d2a29d12a">_texture</a>;
<a name="l00257"></a>00257         _glMinFilter = stage.<a class="code" href="class_gr_texture_stage.html#ec3c4ece0454c8c99bc2c187e2b236cc">_glMinFilter</a>;
<a name="l00258"></a>00258         _glMagFilter = stage.<a class="code" href="class_gr_texture_stage.html#cabe09dd7dc3b8d543c30c6521342424">_glMagFilter</a>;
<a name="l00259"></a>00259         _glAddressS = stage.<a class="code" href="class_gr_texture_stage.html#a6e8af6e327ea817288bcdad39a4fa18">_glAddressS</a>;
<a name="l00260"></a>00260         _glAddressT = stage.<a class="code" href="class_gr_texture_stage.html#850c80be3481327cca903c92ee700240">_glAddressT</a>;
<a name="l00261"></a>00261         _genTextureFlag = stage.<a class="code" href="class_gr_texture_stage.html#3a0be889a399e712d9bb896988bfc16e">_genTextureFlag</a>;
<a name="l00262"></a>00262         _texColorMod = stage.<a class="code" href="class_gr_texture_stage.html#eabc5b721b61d8621ad960fb51c7177c">_texColorMod</a>;
<a name="l00263"></a>00263         _texColorAdd = stage.<a class="code" href="class_gr_texture_stage.html#8b4e0d8bd39609ffe3c64b7a6df987ba">_texColorAdd</a>;
<a name="l00264"></a>00264         _maxAnisotropy = stage.<a class="code" href="class_gr_texture_stage.html#33bc617466c94cdac967c2cdb45e3142">_maxAnisotropy</a>;
<a name="l00265"></a>00265         _addressS = stage.<a class="code" href="class_gr_texture_stage.html#5a0716458c74e2009afdab41e8c5f0ab">_addressS</a>;
<a name="l00266"></a>00266         _addressT = stage.<a class="code" href="class_gr_texture_stage.html#d963328251f3ead5d4258bdb95d388db">_addressT</a>;
<a name="l00267"></a>00267         _filterMode = stage.<a class="code" href="class_gr_texture_stage.html#e46793de15a2cb53f9bfea7001f08b53">_filterMode</a>;
<a name="l00268"></a>00268         _mipMapEnable = stage.<a class="code" href="class_gr_texture_stage.html#8404cdf61c5f85c9f8cc2f4c77449101">_mipMapEnable</a>;
<a name="l00269"></a>00269         _glModesDirty = stage.<a class="code" href="class_gr_texture_stage.html#5059d16f47f35bde159485493923f2e4">_glModesDirty</a>;
<a name="l00270"></a>00270 }
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Feb 13 17:19:59 2009 for Bootstrap Engine by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>

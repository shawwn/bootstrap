<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Bootstrap Engine: C:/Bootstrap/ProjectBX/Documentation/Code/Engine/Common/MMat3x3.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>C:/Bootstrap/ProjectBX/Documentation/Code/Engine/Common/MMat3x3.cpp</h1><a href="_m_mat3x3_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//----------------------------------------------------------</span>
<a name="l00006"></a>00006 <span class="comment"></span><span class="comment">//----------------------------------------------------------</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include "<a class="code" href="common__afx_8h.html">common_afx.h</a>"</span>
<a name="l00008"></a>00008 
<a name="l00010"></a>00010 <span class="preprocessor">#include "<a class="code" href="_m_mat3x3_8h.html">MMat3x3.h</a>"</span>
<a name="l00011"></a>00011 
<a name="l00013"></a>00013 <span class="preprocessor">#include "<a class="code" href="_m_vec3_8h.html">MVec3.h</a>"</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include "<a class="code" href="_u_reader_8h.html">UReader.h</a>"</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include "<a class="code" href="_u_writer_8h.html">UWriter.h</a>"</span>
<a name="l00016"></a>00016 
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="comment">//**********************************************************</span>
<a name="l00022"></a>00022 <span class="comment"></span><span class="comment">//**********************************************************</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="comment">//==========================================================</span>
<a name="l00026"></a>00026 <span class="comment"></span><span class="comment">//==========================================================</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="comment">//----------------------------------------------------------</span>
<a name="l00029"></a><a class="code" href="class_m_mat3x3.html#f7123b5212981cb6a5267a8dbf8e86ec">00029</a> <a class="code" href="class_m_mat3x3.html#f7123b5212981cb6a5267a8dbf8e86ec" title="class header.">MMat3x3::MMat3x3</a>()
<a name="l00030"></a>00030 {
<a name="l00032"></a>00032         _data[ 0 ] = 1.0f;
<a name="l00033"></a>00033         _data[ 1 ] = 0.0f;
<a name="l00034"></a>00034         _data[ 2 ] = 0.0f;
<a name="l00035"></a>00035         _data[ 3 ] = 0.0f;
<a name="l00036"></a>00036         _data[ 4 ] = 1.0f;
<a name="l00037"></a>00037         _data[ 5 ] = 0.0f;
<a name="l00038"></a>00038         _data[ 6 ] = 0.0f;
<a name="l00039"></a>00039         _data[ 7 ] = 0.0f;
<a name="l00040"></a>00040         _data[ 8 ] = 1.0f;
<a name="l00041"></a>00041 }
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="comment">//----------------------------------------------------------</span>
<a name="l00044"></a><a class="code" href="class_m_mat3x3.html#f751a2f8378abde20ffe3fcfc39a726b">00044</a> <a class="code" href="class_m_mat3x3.html#f7123b5212981cb6a5267a8dbf8e86ec" title="class header.">MMat3x3::MMat3x3</a>( <span class="keywordtype">float</span> <a class="code" href="_g_l_8h.html#9298c7ad619074f5285b32c6b72bfdea">y</a>, <span class="keywordtype">float</span> <a class="code" href="glext_8h.html#d77deca22f617d3f0e0eb786445689fc">x</a>, <span class="keywordtype">float</span> <a class="code" href="glext_8h.html#5b27107fca91cf19a778530405575b37">z</a> )
<a name="l00045"></a>00045 {
<a name="l00046"></a>00046         <a class="code" href="class_m_mat3x3.html#b28ee4ae5b4e8278bdad52dfc62d70d7">FromEulerYXZ</a>( y, x, z );
<a name="l00047"></a>00047 }
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="comment">//----------------------------------------------------------</span>
<a name="l00050"></a><a class="code" href="class_m_mat3x3.html#f53f2aa6c4d47b4f44580574299800ef">00050</a> <a class="code" href="class_m_mat3x3.html#f7123b5212981cb6a5267a8dbf8e86ec" title="class header.">MMat3x3::MMat3x3</a>( <span class="keywordtype">float</span> _11, <span class="keywordtype">float</span> _12, <span class="keywordtype">float</span> _13,
<a name="l00051"></a>00051                                   <span class="keywordtype">float</span> _21, <span class="keywordtype">float</span> _22, <span class="keywordtype">float</span> _23,
<a name="l00052"></a>00052                                   <span class="keywordtype">float</span> _31, <span class="keywordtype">float</span> _32, <span class="keywordtype">float</span> _33 )
<a name="l00053"></a>00053 {
<a name="l00055"></a>00055         <a class="code" href="common__afx_8h.html#9f04579206286b6dc8c9708063450144" title="memory functions.">MemSet</a>( _data, 0, <span class="keyword">sizeof</span>( _data ) );
<a name="l00056"></a>00056 
<a name="l00058"></a>00058         _data[ 0 ] = _11;
<a name="l00059"></a>00059         _data[ 1 ] = _12;
<a name="l00060"></a>00060         _data[ 2 ] = _13;
<a name="l00061"></a>00061 
<a name="l00062"></a>00062         _data[ 3 ] = _21;
<a name="l00063"></a>00063         _data[ 4 ] = _22;
<a name="l00064"></a>00064         _data[ 5 ] = _23;
<a name="l00065"></a>00065 
<a name="l00066"></a>00066         _data[ 6 ] = _31;
<a name="l00067"></a>00067         _data[ 7 ] = _32;
<a name="l00068"></a>00068         _data[ 8 ] = _33;
<a name="l00069"></a>00069 }
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="comment">//----------------------------------------------------------</span>
<a name="l00072"></a><a class="code" href="class_m_mat3x3.html#f3b19cba8bce9dd0916fdc214faee6cb">00072</a> <a class="code" href="class_m_mat3x3.html#f7123b5212981cb6a5267a8dbf8e86ec" title="class header.">MMat3x3::MMat3x3</a>( <span class="keyword">const</span> <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>&amp; axis, <span class="keywordtype">float</span> <a class="code" href="glext_8h.html#9e06c1f76a20fed54ca742cd25cb02c4">angle</a> )
<a name="l00073"></a>00073 {
<a name="l00074"></a>00074         <a class="code" href="class_m_mat3x3.html#1513b85723e4ab41feb71d56db6aa625">MakeRotation</a>( axis, angle );
<a name="l00075"></a>00075 }
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="comment">//----------------------------------------------------------</span>
<a name="l00078"></a><a class="code" href="class_m_mat3x3.html#5940f6a8f9f4a0d11fd737a9b8f78c85">00078</a> <a class="code" href="class_m_mat3x3.html#f7123b5212981cb6a5267a8dbf8e86ec" title="class header.">MMat3x3::MMat3x3</a>( <span class="keyword">const</span> <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>&amp; row0, <span class="keyword">const</span> <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>&amp; row1, <span class="keyword">const</span> <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>&amp; row2 )
<a name="l00079"></a>00079 {
<a name="l00080"></a>00080         <a class="code" href="class_m_mat3x3.html#1cd3b344fa0732e7be859ce95f35f063">SetRow</a>( 0, row0 );
<a name="l00081"></a>00081         <a class="code" href="class_m_mat3x3.html#1cd3b344fa0732e7be859ce95f35f063">SetRow</a>( 1, row1 );
<a name="l00082"></a>00082         <a class="code" href="class_m_mat3x3.html#1cd3b344fa0732e7be859ce95f35f063">SetRow</a>( 2, row2 );
<a name="l00083"></a>00083 }
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="comment">//----------------------------------------------------------</span>
<a name="l00086"></a><a class="code" href="class_m_mat3x3.html#be15ae144f6155954faf29c683f9fe72">00086</a> <a class="code" href="class_m_mat3x3.html#f7123b5212981cb6a5267a8dbf8e86ec" title="class header.">MMat3x3::MMat3x3</a>( <span class="keyword">const</span> <a class="code" href="class_m_mat3x3.html" title="class MMat3x3">MMat3x3</a>&amp; mat )
<a name="l00087"></a>00087 {
<a name="l00089"></a>00089         Copy( mat );
<a name="l00090"></a>00090 }
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 <span class="comment">//----------------------------------------------------------</span>
<a name="l00093"></a><a class="code" href="class_m_mat3x3.html#b08b8249982271bc69924bbb325037ba">00093</a> <a class="code" href="class_m_mat3x3.html#b08b8249982271bc69924bbb325037ba">MMat3x3::~MMat3x3</a>()
<a name="l00094"></a>00094 {
<a name="l00095"></a>00095 
<a name="l00096"></a>00096 }
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 <span class="comment">//==========================================================</span>
<a name="l00101"></a>00101 <span class="comment"></span><span class="comment">//==========================================================</span>
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 <span class="comment">//----------------------------------------------------------</span>
<a name="l00104"></a>00104 <a class="code" href="class_m_mat3x3.html" title="class MMat3x3">MMat3x3</a>&amp;
<a name="l00105"></a><a class="code" href="class_m_mat3x3.html#893b3d2e337be1b09d3d694c23c0c3e6">00105</a> <a class="code" href="class_m_mat3x3.html#893b3d2e337be1b09d3d694c23c0c3e6" title="public methods">MMat3x3::operator = </a>( <span class="keyword">const</span> <a class="code" href="class_m_mat3x3.html" title="class MMat3x3">MMat3x3</a>&amp; mat )
<a name="l00106"></a>00106 {
<a name="l00107"></a>00107         Copy( mat );
<a name="l00108"></a>00108         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00109"></a>00109 }
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 <span class="comment">//----------------------------------------------------------</span>
<a name="l00112"></a>00112 <span class="keywordtype">void</span>
<a name="l00113"></a><a class="code" href="class_m_mat3x3.html#10714e78ed687e30e915ef75c34c5cbb">00113</a> <a class="code" href="class_m_mat3x3.html#10714e78ed687e30e915ef75c34c5cbb">MMat3x3::ToEulerYXZ</a>( <span class="keywordtype">float</span>&amp; <a class="code" href="_g_l_8h.html#9298c7ad619074f5285b32c6b72bfdea">y</a>, <span class="keywordtype">float</span>&amp; <a class="code" href="glext_8h.html#d77deca22f617d3f0e0eb786445689fc">x</a>, <span class="keywordtype">float</span>&amp; <a class="code" href="glext_8h.html#5b27107fca91cf19a778530405575b37">z</a> )
<a name="l00114"></a>00114 {
<a name="l00116"></a>00116         <span class="keywordflow">if</span> ( _data[ 3 ] &gt; 0.998 ) {
<a name="l00117"></a>00117                 y = <a class="code" href="common__afx_8h.html#a76c333a8dfb1148d17cdbb72a6541af">ATan2</a>( _data[ 2 ], _data[ 8 ] );
<a name="l00118"></a>00118                 z = <a class="code" href="common__afx_8h.html#e3ec3219e4eee3b0992bfd59c2e2bc42">HALF_PI</a>;
<a name="l00119"></a>00119                 x = 0.0f;
<a name="l00120"></a>00120                 <span class="keywordflow">return</span>;
<a name="l00121"></a>00121         }
<a name="l00122"></a>00122 
<a name="l00124"></a>00124         <span class="keywordflow">if</span> ( _data[ 3 ] &lt; -0.998 ) {
<a name="l00125"></a>00125                 y = <a class="code" href="common__afx_8h.html#a76c333a8dfb1148d17cdbb72a6541af">ATan2</a>( _data[ 2 ], _data[ 8 ] );
<a name="l00126"></a>00126                 z = -<a class="code" href="common__afx_8h.html#e3ec3219e4eee3b0992bfd59c2e2bc42">HALF_PI</a>;
<a name="l00127"></a>00127                 x = 0.0f;
<a name="l00128"></a>00128                 <span class="keywordflow">return</span>;
<a name="l00129"></a>00129         }
<a name="l00130"></a>00130 
<a name="l00132"></a>00132         y = <a class="code" href="common__afx_8h.html#a76c333a8dfb1148d17cdbb72a6541af">ATan2</a>( -_data[ 6 ], _data[ 0 ] );
<a name="l00133"></a>00133         x = <a class="code" href="common__afx_8h.html#a76c333a8dfb1148d17cdbb72a6541af">ATan2</a>( -_data[ 5 ], _data[ 4 ] );
<a name="l00134"></a>00134         z = <a class="code" href="common__afx_8h.html#b2d03690ffbd25530b6d9b6404c811ca">ASin</a>( _data[ 3 ] ); 
<a name="l00135"></a>00135 }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 <span class="comment">//----------------------------------------------------------</span>
<a name="l00138"></a>00138 <span class="keywordtype">void</span>
<a name="l00139"></a><a class="code" href="class_m_mat3x3.html#b28ee4ae5b4e8278bdad52dfc62d70d7">00139</a> <a class="code" href="class_m_mat3x3.html#b28ee4ae5b4e8278bdad52dfc62d70d7">MMat3x3::FromEulerYXZ</a>( <span class="keywordtype">float</span> <a class="code" href="_g_l_8h.html#9298c7ad619074f5285b32c6b72bfdea">y</a>, <span class="keywordtype">float</span> <a class="code" href="glext_8h.html#d77deca22f617d3f0e0eb786445689fc">x</a>, <span class="keywordtype">float</span> <a class="code" href="glext_8h.html#5b27107fca91cf19a778530405575b37">z</a> )
<a name="l00140"></a>00140 {
<a name="l00142"></a>00142     <span class="keywordtype">float</span> ch = <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( y );
<a name="l00143"></a>00143     <span class="keywordtype">float</span> sh = <a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( y );
<a name="l00144"></a>00144     <span class="keywordtype">float</span> cb = <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( x );
<a name="l00145"></a>00145     <span class="keywordtype">float</span> sb = <a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( x );
<a name="l00146"></a>00146     <span class="keywordtype">float</span> ca = <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( z );
<a name="l00147"></a>00147     <span class="keywordtype">float</span> sa = <a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( z );
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     _data[ 0 ] = ch * ca;
<a name="l00150"></a>00150     _data[ 1 ] = sh*sb - ch*sa*cb;
<a name="l00151"></a>00151     _data[ 2 ] = ch*sa*sb + sh*cb;
<a name="l00152"></a>00152     _data[ 3 ] = sa;
<a name="l00153"></a>00153     _data[ 4 ] = ca*cb;
<a name="l00154"></a>00154     _data[ 5 ] = -ca*sb;
<a name="l00155"></a>00155     _data[ 6 ] = -sh*ca;
<a name="l00156"></a>00156     _data[ 7 ] = sh*sa*cb + ch*sb;
<a name="l00157"></a>00157     _data[ 8 ] = -sh*sa*sb + ch*cb;
<a name="l00158"></a>00158 }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="comment">//----------------------------------------------------------</span>
<a name="l00161"></a>00161 <span class="keywordtype">void</span>
<a name="l00162"></a><a class="code" href="class_m_mat3x3.html#bd1bb896aeeaf05ec76624c5e996818b">00162</a> <a class="code" href="class_m_mat3x3.html#bd1bb896aeeaf05ec76624c5e996818b">MMat3x3::MakeXRotation</a>( <span class="keywordtype">float</span> angleInRad )
<a name="l00163"></a>00163 {
<a name="l00164"></a>00164         _data[ 0 ] = 1.0f;
<a name="l00165"></a>00165         _data[ 1 ] = 0.0f;
<a name="l00166"></a>00166         _data[ 2 ] = 0.0f;
<a name="l00167"></a>00167         _data[ 3 ] = 0.0f;
<a name="l00168"></a>00168         _data[ 4 ] = <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angleInRad );
<a name="l00169"></a>00169         _data[ 5 ] = -<a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( angleInRad );
<a name="l00170"></a>00170         _data[ 6 ] = 0.0f;
<a name="l00171"></a>00171         _data[ 7 ] = <a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( angleInRad );
<a name="l00172"></a>00172         _data[ 8 ] = <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angleInRad );
<a name="l00173"></a>00173 }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 <span class="comment">//----------------------------------------------------------</span>
<a name="l00176"></a>00176 <span class="keywordtype">void</span>
<a name="l00177"></a><a class="code" href="class_m_mat3x3.html#772a24dfb662f3348eaf19c5e57b578b">00177</a> <a class="code" href="class_m_mat3x3.html#772a24dfb662f3348eaf19c5e57b578b">MMat3x3::MakeYRotation</a>( <span class="keywordtype">float</span> angleInRad )
<a name="l00178"></a>00178 {
<a name="l00179"></a>00179         _data[ 0 ] = <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angleInRad );
<a name="l00180"></a>00180         _data[ 1 ] = 0.0f;
<a name="l00181"></a>00181         _data[ 2 ] = <a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( angleInRad );
<a name="l00182"></a>00182         _data[ 3 ] = 0.0f;
<a name="l00183"></a>00183         _data[ 4 ] = 1.0f;
<a name="l00184"></a>00184         _data[ 5 ] = 0.0f;
<a name="l00185"></a>00185         _data[ 6 ] = -<a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( angleInRad );
<a name="l00186"></a>00186         _data[ 7 ] = 0.0f;
<a name="l00187"></a>00187         _data[ 8 ] = <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angleInRad );
<a name="l00188"></a>00188 }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 <span class="comment">//----------------------------------------------------------</span>
<a name="l00191"></a>00191 <span class="keywordtype">void</span>
<a name="l00192"></a><a class="code" href="class_m_mat3x3.html#34c3fe8d743433b98bd1cdf0eb053224">00192</a> <a class="code" href="class_m_mat3x3.html#34c3fe8d743433b98bd1cdf0eb053224">MMat3x3::MakeZRotation</a>( <span class="keywordtype">float</span> angleInRad )
<a name="l00193"></a>00193 {
<a name="l00194"></a>00194         _data[ 0 ] = <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angleInRad );
<a name="l00195"></a>00195         _data[ 1 ] = -<a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( angleInRad );
<a name="l00196"></a>00196         _data[ 2 ] = 0.0f;
<a name="l00197"></a>00197         _data[ 3 ] = <a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( angleInRad );
<a name="l00198"></a>00198         _data[ 4 ] = <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angleInRad );
<a name="l00199"></a>00199         _data[ 5 ] = 0.0f;
<a name="l00200"></a>00200         _data[ 6 ] = 0.0f;
<a name="l00201"></a>00201         _data[ 7 ] = 0.0f;
<a name="l00202"></a>00202         _data[ 8 ] = 1.0f;
<a name="l00203"></a>00203 }
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 <span class="comment">//----------------------------------------------------------</span>
<a name="l00206"></a>00206 <span class="keywordtype">void</span>
<a name="l00207"></a><a class="code" href="class_m_mat3x3.html#1513b85723e4ab41feb71d56db6aa625">00207</a> <a class="code" href="class_m_mat3x3.html#1513b85723e4ab41feb71d56db6aa625">MMat3x3::MakeRotation</a>( <span class="keyword">const</span> <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>&amp; axis, <span class="keywordtype">float</span> <a class="code" href="glext_8h.html#9e06c1f76a20fed54ca742cd25cb02c4">angle</a> )
<a name="l00208"></a>00208 {
<a name="l00210"></a>00210 <span class="preprocessor">#if 1</span>
<a name="l00211"></a>00211 <span class="preprocessor"></span>        _data[ 0 ] = 1 + ( 1 - <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angle ) ) * ( axis.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() * axis.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() - 1.0f );
<a name="l00212"></a>00212         _data[ 1 ] = -axis.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>() * <a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( angle ) + ( 1.0f - <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angle ) ) * axis.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() * axis.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>();
<a name="l00213"></a>00213         _data[ 2 ] = axis.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() * <a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( angle ) + ( 1.0f - <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angle ) ) * axis.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() * axis.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>();
<a name="l00214"></a>00214 
<a name="l00215"></a>00215         _data[ 3 ] = axis.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>() * <a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( angle ) + ( 1.0f - <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angle ) ) * axis.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() * axis.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>();
<a name="l00216"></a>00216         _data[ 4 ] = 1 + ( 1.0f - <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angle ) ) * ( axis.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() * axis.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() - 1.0f );
<a name="l00217"></a>00217         _data[ 5 ] = -axis.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() * <a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( angle ) + ( 1.0f - <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angle ) ) * axis.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() * axis.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>();
<a name="l00218"></a>00218 
<a name="l00219"></a>00219         _data[ 6 ] = -axis.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() * <a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( angle ) + ( 1.0f - <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angle ) ) * axis.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() * axis.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>();
<a name="l00220"></a>00220         _data[ 7 ] = axis.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() * <a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( angle ) + ( 1.0f - <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angle ) ) * axis.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() * axis.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>();
<a name="l00221"></a>00221         _data[ 8 ] = 1.0f + ( 1.0f - <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angle ) ) * ( axis.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>() * axis.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>() - 1.0f );
<a name="l00222"></a>00222 <span class="preprocessor">#else</span>
<a name="l00223"></a>00223 <span class="preprocessor"></span>        <span class="keywordtype">float</span> <a class="code" href="glext_8h.html#1f2d7f8147412c43ba2303a56f97ee73">c</a> = <a class="code" href="common__afx_8h.html#ed3c0bce670160f89fca79b5d0de1a76">Cos</a>( angle );
<a name="l00224"></a>00224         <span class="keywordtype">float</span> <a class="code" href="glext_8h.html#d585a1393cfa368fa9dc3d8ebff640d5">s</a> = <a class="code" href="common__afx_8h.html#15c4437929569821a369c1f0df5ab3b5">Sin</a>( angle );
<a name="l00225"></a>00225         <span class="keywordtype">float</span> <a class="code" href="glext_8h.html#00140d6f5c548b26daf170bf16e86a6d">t</a> = 1 - c;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227         _data[ 0 ] = c + axis.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() * axis.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() * t;
<a name="l00228"></a>00228         _data[ 4 ] = c + axis.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() * axis.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() * t;
<a name="l00229"></a>00229         _data[ 8 ] = c + axis.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>() * axis.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>() * t;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231         <span class="keywordtype">float</span> tmp1 = axis.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() * axis.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() * t;
<a name="l00232"></a>00232         <span class="keywordtype">float</span> tmp2 = axis.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>() * s;
<a name="l00233"></a>00233         _data[ 3 ] = tmp1 + tmp2;
<a name="l00234"></a>00234         _data[ 1 ] = tmp1 - tmp2;
<a name="l00235"></a>00235 
<a name="l00236"></a>00236         tmp1 = axis.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() * axis.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>() * t;
<a name="l00237"></a>00237         tmp2 = axis.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() * s;
<a name="l00238"></a>00238         _data[ 6 ] = tmp1 - tmp2;
<a name="l00239"></a>00239         _data[ 2 ] = tmp1 + tmp2;
<a name="l00240"></a>00240 
<a name="l00241"></a>00241         tmp1 = axis.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() * axis.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>() * t;
<a name="l00242"></a>00242         tmp2 = axis.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() * s;
<a name="l00243"></a>00243         _data[ 7 ] = tmp1 + tmp2;
<a name="l00244"></a>00244         _data[ 5 ] = tmp1 - tmp2;
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 <span class="preprocessor">#endif</span>
<a name="l00247"></a>00247 <span class="preprocessor"></span>}
<a name="l00248"></a>00248 
<a name="l00249"></a>00249 <span class="comment">//----------------------------------------------------------</span>
<a name="l00250"></a>00250 <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>
<a name="l00251"></a><a class="code" href="class_m_mat3x3.html#84fad6815686a050837119f242650324">00251</a> <a class="code" href="class_m_mat3x3.html#84fad6815686a050837119f242650324">MMat3x3::RotatePoint</a>( <span class="keyword">const</span> <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>&amp; point )<span class="keyword"> const</span>
<a name="l00252"></a>00252 <span class="keyword"></span>{
<a name="l00253"></a>00253         <span class="keywordflow">return</span> <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>( _data[ 0 ] * point.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() + _data[ 1 ] * point.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() + _data[ 2 ] * point.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>(),
<a name="l00254"></a>00254                                   _data[ 3 ] * point.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() + _data[ 4 ] * point.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() + _data[ 5 ] * point.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>(),
<a name="l00255"></a>00255                                   _data[ 6 ] * point.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() + _data[ 7 ] * point.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() + _data[ 8 ] * point.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>() );
<a name="l00256"></a>00256 }
<a name="l00257"></a>00257 
<a name="l00258"></a>00258 <span class="comment">//----------------------------------------------------------</span>
<a name="l00259"></a>00259 <span class="keywordtype">void</span>
<a name="l00260"></a><a class="code" href="class_m_mat3x3.html#15242b646b6462a0f6fa44b324ff009c">00260</a> <a class="code" href="class_m_mat3x3.html#15242b646b6462a0f6fa44b324ff009c">MMat3x3::RotatePointFast</a>( <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>&amp; point )<span class="keyword"> const</span>
<a name="l00261"></a>00261 <span class="keyword"></span>{
<a name="l00262"></a>00262         <span class="keywordtype">float</span> <a class="code" href="glext_8h.html#d77deca22f617d3f0e0eb786445689fc">x</a> = _data[ 0 ] * point.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() + _data[ 1 ] * point.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() + _data[ 2 ] * point.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>();
<a name="l00263"></a>00263         <span class="keywordtype">float</span> <a class="code" href="_g_l_8h.html#9298c7ad619074f5285b32c6b72bfdea">y</a> = _data[ 3 ] * point.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() + _data[ 4 ] * point.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() + _data[ 5 ] * point.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>();
<a name="l00264"></a>00264         <span class="keywordtype">float</span> <a class="code" href="glext_8h.html#5b27107fca91cf19a778530405575b37">z</a> = _data[ 6 ] * point.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>() + _data[ 7 ] * point.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>() + _data[ 8 ] * point.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>();
<a name="l00265"></a>00265         point.<a class="code" href="class_m_vec3.html#7ab6073bcf8afbcf630ad8f2ae8992b8">SetX</a>( x );
<a name="l00266"></a>00266         point.<a class="code" href="class_m_vec3.html#128947a1f8cbc74a87b3b66454dfbb86">SetY</a>( y );
<a name="l00267"></a>00267         point.<a class="code" href="class_m_vec3.html#bf45cf723890eedc23d0aa9eaf4a578a">SetZ</a>( z );
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 <span class="comment">//----------------------------------------------------------</span>
<a name="l00271"></a>00271 <span class="keywordtype">void</span>
<a name="l00272"></a><a class="code" href="class_m_mat3x3.html#1cd3b344fa0732e7be859ce95f35f063">00272</a> <a class="code" href="class_m_mat3x3.html#1cd3b344fa0732e7be859ce95f35f063">MMat3x3::SetRow</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keyword">const</span> <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>&amp; <a class="code" href="glext_8h.html#11b277b422822f784ee248b43eee3e1e">row</a> )
<a name="l00273"></a>00273 {
<a name="l00274"></a>00274         <span class="keywordtype">int</span> <a class="code" href="_g_l_8h.html#c55adc720a3098c1b454d2a4647f4361">start</a> = i * 3;
<a name="l00275"></a>00275         _data[ start ] = row.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>();
<a name="l00276"></a>00276         _data[ start+1 ] = row.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>();
<a name="l00277"></a>00277         _data[ start+2 ] = row.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>();
<a name="l00278"></a>00278 }
<a name="l00279"></a>00279 
<a name="l00280"></a>00280 <span class="comment">//----------------------------------------------------------</span>
<a name="l00281"></a>00281 <span class="keywordtype">void</span>
<a name="l00282"></a><a class="code" href="class_m_mat3x3.html#a4ca3211b668abaa0ce6cefb4792dd1f">00282</a> <a class="code" href="class_m_mat3x3.html#a4ca3211b668abaa0ce6cefb4792dd1f">MMat3x3::GetRow</a>( <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>&amp; rowOut, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i )<span class="keyword"> const</span>
<a name="l00283"></a>00283 <span class="keyword"></span>{
<a name="l00284"></a>00284         <span class="keywordtype">int</span> <a class="code" href="_g_l_8h.html#c55adc720a3098c1b454d2a4647f4361">start</a> = i * 3;
<a name="l00285"></a>00285         rowOut.<a class="code" href="class_m_vec3.html#7ab6073bcf8afbcf630ad8f2ae8992b8">SetX</a>( _data[ start ] );
<a name="l00286"></a>00286         rowOut.<a class="code" href="class_m_vec3.html#128947a1f8cbc74a87b3b66454dfbb86">SetY</a>( _data[ start+1 ] );
<a name="l00287"></a>00287         rowOut.<a class="code" href="class_m_vec3.html#bf45cf723890eedc23d0aa9eaf4a578a">SetZ</a>( _data[ start+2 ] );
<a name="l00288"></a>00288 }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 <span class="comment">//----------------------------------------------------------</span>
<a name="l00291"></a>00291 <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>
<a name="l00292"></a><a class="code" href="class_m_mat3x3.html#31977832772ce75b2ad0d494e6bbcd30">00292</a> <a class="code" href="class_m_mat3x3.html#a4ca3211b668abaa0ce6cefb4792dd1f">MMat3x3::GetRow</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i )<span class="keyword"> const</span>
<a name="l00293"></a>00293 <span class="keyword"></span>{
<a name="l00294"></a>00294         <span class="keywordtype">int</span> <a class="code" href="_g_l_8h.html#c55adc720a3098c1b454d2a4647f4361">start</a> = i * 3;
<a name="l00295"></a>00295         <span class="keywordflow">return</span> <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>( _data[ start ], _data[ start+1 ], _data[ start+2 ] );
<a name="l00296"></a>00296 }
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 <span class="comment">//----------------------------------------------------------</span>
<a name="l00299"></a>00299 <span class="keywordtype">void</span>
<a name="l00300"></a><a class="code" href="class_m_mat3x3.html#7f30bf03e58ead2cd8d781234be60868">00300</a> <a class="code" href="class_m_mat3x3.html#7f30bf03e58ead2cd8d781234be60868">MMat3x3::SetCol</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keyword">const</span> <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>&amp; col )
<a name="l00301"></a>00301 {
<a name="l00302"></a>00302         _data[ i ]   = col.<a class="code" href="class_m_vec3.html#8b834219441d8d65b3e4df28fe03f60f">GetX</a>();
<a name="l00303"></a>00303         _data[ i+3 ] = col.<a class="code" href="class_m_vec3.html#dfadf4adb521222d91980376a7679dc8">GetY</a>();
<a name="l00304"></a>00304         _data[ i+6 ] = col.<a class="code" href="class_m_vec3.html#8b29390479c105bbb9926188b9742329">GetZ</a>();
<a name="l00305"></a>00305 }
<a name="l00306"></a>00306 
<a name="l00307"></a>00307 <span class="comment">//----------------------------------------------------------</span>
<a name="l00308"></a>00308 <span class="keywordtype">void</span>
<a name="l00309"></a><a class="code" href="class_m_mat3x3.html#287d293d9d309a9991ffb4cae6652998">00309</a> <a class="code" href="class_m_mat3x3.html#287d293d9d309a9991ffb4cae6652998">MMat3x3::GetCol</a>( <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>&amp; colOut, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i )<span class="keyword"> const</span>
<a name="l00310"></a>00310 <span class="keyword"></span>{
<a name="l00311"></a>00311         colOut.<a class="code" href="class_m_vec3.html#7ab6073bcf8afbcf630ad8f2ae8992b8">SetX</a>( _data[ i ] );
<a name="l00312"></a>00312         colOut.<a class="code" href="class_m_vec3.html#128947a1f8cbc74a87b3b66454dfbb86">SetY</a>( _data[ i+3 ] );
<a name="l00313"></a>00313         colOut.<a class="code" href="class_m_vec3.html#bf45cf723890eedc23d0aa9eaf4a578a">SetZ</a>( _data[ i+6 ] );
<a name="l00314"></a>00314 }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 <span class="comment">//----------------------------------------------------------</span>
<a name="l00317"></a>00317 <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>
<a name="l00318"></a><a class="code" href="class_m_mat3x3.html#fec431f74f2796faa5abfdffd767f841">00318</a> <a class="code" href="class_m_mat3x3.html#287d293d9d309a9991ffb4cae6652998">MMat3x3::GetCol</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i )<span class="keyword"> const</span>
<a name="l00319"></a>00319 <span class="keyword"></span>{
<a name="l00320"></a>00320         <span class="keywordflow">return</span> <a class="code" href="class_m_vec3.html" title="class MVec3">MVec3</a>( _data[ i ], _data[ i+3 ], _data[ i+6 ] );
<a name="l00321"></a>00321 }
<a name="l00322"></a>00322 
<a name="l00323"></a>00323 <span class="comment">//----------------------------------------------------------</span>
<a name="l00324"></a>00324 <span class="keywordtype">void</span>
<a name="l00325"></a><a class="code" href="class_m_mat3x3.html#d7c9471fbcf788b8140a336ad7139a21">00325</a> <a class="code" href="class_m_mat3x3.html#d7c9471fbcf788b8140a336ad7139a21">MMat3x3::Transpose</a>()
<a name="l00326"></a>00326 {
<a name="l00327"></a>00327         <a class="code" href="common__afx_8h.html#400f1491dc09805bdbb254cb258e7b41">Swap</a>( _data[1], _data[3] );
<a name="l00328"></a>00328         <a class="code" href="common__afx_8h.html#400f1491dc09805bdbb254cb258e7b41">Swap</a>( _data[2], _data[6] );
<a name="l00329"></a>00329         <a class="code" href="common__afx_8h.html#400f1491dc09805bdbb254cb258e7b41">Swap</a>( _data[5], _data[7] );
<a name="l00330"></a>00330 }
<a name="l00331"></a>00331 
<a name="l00332"></a>00332 <span class="comment">//----------------------------------------------------------</span>
<a name="l00333"></a>00333 <a class="code" href="class_m_mat3x3.html" title="class MMat3x3">MMat3x3</a>
<a name="l00334"></a><a class="code" href="class_m_mat3x3.html#a01f61e6a6c501a6d777a6d8c980736d">00334</a> <a class="code" href="class_m_mat3x3.html#a01f61e6a6c501a6d777a6d8c980736d">MMat3x3::Transposed</a>()<span class="keyword"> const</span>
<a name="l00335"></a>00335 <span class="keyword"></span>{
<a name="l00336"></a>00336         <span class="keywordflow">return</span> <a class="code" href="class_m_mat3x3.html#f7123b5212981cb6a5267a8dbf8e86ec" title="class header.">MMat3x3</a>( _data[ 0 ], _data[ 3 ], _data[ 6 ],
<a name="l00337"></a>00337                                    _data[ 1 ], _data[ 4 ], _data[ 7 ],
<a name="l00338"></a>00338                                    _data[ 2 ], _data[ 5 ], _data[ 8 ] );
<a name="l00339"></a>00339 }
<a name="l00340"></a>00340 
<a name="l00341"></a>00341 <span class="comment">//----------------------------------------------------------</span>
<a name="l00342"></a>00342 <span class="keywordtype">bool</span>
<a name="l00343"></a><a class="code" href="class_m_mat3x3.html#b4b44fc1b81ea6b43cc272ed9433e584">00343</a> <a class="code" href="class_m_mat3x3.html#b4b44fc1b81ea6b43cc272ed9433e584">MMat3x3::Inverse</a>()
<a name="l00344"></a>00344 {
<a name="l00345"></a>00345         <span class="keywordtype">float</span> det = _data[0]*( _data[8]*_data[4] - _data[7]*_data[5] ) -
<a name="l00346"></a>00346                                 _data[3]*( _data[8]*_data[1] - _data[7]*_data[2] ) +
<a name="l00347"></a>00347                                 _data[6]*( _data[5]*_data[1] - _data[4]*_data[2] );
<a name="l00348"></a>00348         <span class="keywordflow">if</span> ( <a class="code" href="common__afx_8h.html#7b41d482448c80b0a0e2d2c1fac77bfd">Abs</a>( det ) &lt; 0.0001 )
<a name="l00349"></a>00349                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00350"></a>00350 
<a name="l00351"></a>00351         <span class="keywordtype">float</span> i11 = _data[8]*_data[4] - _data[7]*_data[5];
<a name="l00352"></a>00352         <span class="keywordtype">float</span> i12 = _data[8]*_data[1] - _data[7]*_data[2];
<a name="l00353"></a>00353         <span class="keywordtype">float</span> i13 = _data[5]*_data[1] - _data[4]*_data[2];
<a name="l00354"></a>00354         <span class="keywordtype">float</span> i21 = _data[8]*_data[3] - _data[6]*_data[5];
<a name="l00355"></a>00355         <span class="keywordtype">float</span> i22 = _data[8]*_data[0] - _data[6]*_data[2];
<a name="l00356"></a>00356         <span class="keywordtype">float</span> i23 = _data[5]*_data[0] - _data[3]*_data[2];
<a name="l00357"></a>00357         <span class="keywordtype">float</span> i31 = _data[7]*_data[3] - _data[6]*_data[4];
<a name="l00358"></a>00358         <span class="keywordtype">float</span> i32 = _data[7]*_data[0] - _data[6]*_data[1];
<a name="l00359"></a>00359         <span class="keywordtype">float</span> i33 = _data[4]*_data[0] - _data[3]*_data[1];
<a name="l00360"></a>00360         <span class="keywordtype">float</span> invDet = 1.0f / det;
<a name="l00361"></a>00361         _data[0] = invDet *  i11;
<a name="l00362"></a>00362         _data[1] = invDet * -i12;
<a name="l00363"></a>00363         _data[2] = invDet *  i13;
<a name="l00364"></a>00364         _data[3] = invDet * -i21;
<a name="l00365"></a>00365         _data[4] = invDet *  i22;
<a name="l00366"></a>00366         _data[5] = invDet * -i23;
<a name="l00367"></a>00367         _data[6] = invDet *  i31;
<a name="l00368"></a>00368         _data[7] = invDet * -i32;
<a name="l00369"></a>00369         _data[8] = invDet *  i33;
<a name="l00370"></a>00370         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00371"></a>00371 }
<a name="l00372"></a>00372 
<a name="l00373"></a>00373 <span class="comment">//----------------------------------------------------------</span>
<a name="l00374"></a>00374 <span class="keywordtype">bool</span>
<a name="l00375"></a><a class="code" href="class_m_mat3x3.html#b2aa137135d4743f57910a2958eacd2b">00375</a> <a class="code" href="class_m_mat3x3.html#b2aa137135d4743f57910a2958eacd2b">MMat3x3::InverseTransposed</a>( <a class="code" href="class_m_mat3x3.html" title="class MMat3x3">MMat3x3</a>&amp; output )<span class="keyword"> const</span>
<a name="l00376"></a>00376 <span class="keyword"></span>{
<a name="l00378"></a>00378         output = *<span class="keyword">this</span>;
<a name="l00379"></a>00379         <span class="keywordflow">if</span> ( !output.<a class="code" href="class_m_mat3x3.html#b4b44fc1b81ea6b43cc272ed9433e584">Inverse</a>() )
<a name="l00380"></a>00380                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00381"></a>00381         output.<a class="code" href="class_m_mat3x3.html#d7c9471fbcf788b8140a336ad7139a21">Transpose</a>();
<a name="l00382"></a>00382         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00383"></a>00383 }
<a name="l00384"></a>00384 
<a name="l00385"></a>00385 <span class="comment">//----------------------------------------------------------</span>
<a name="l00386"></a>00386 <span class="keywordtype">float</span>&amp;
<a name="l00387"></a><a class="code" href="class_m_mat3x3.html#31c4291012e2002e0840a9d744c29f83">00387</a> <a class="code" href="class_m_mat3x3.html#31c4291012e2002e0840a9d744c29f83">MMat3x3::operator ()</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j )
<a name="l00388"></a>00388 {
<a name="l00389"></a>00389         <a class="code" href="common__afx_8h.html#2630490ce4292ed6d05359d2957796b8">B_ASSERT</a>( i &lt; 3 );
<a name="l00390"></a>00390         <a class="code" href="common__afx_8h.html#2630490ce4292ed6d05359d2957796b8">B_ASSERT</a>( j &lt; 3 );
<a name="l00391"></a>00391         <span class="keywordflow">return</span> _data[ i*3+j ];
<a name="l00392"></a>00392 }
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 <span class="comment">//----------------------------------------------------------</span>
<a name="l00395"></a>00395 <span class="keywordtype">float</span>
<a name="l00396"></a><a class="code" href="class_m_mat3x3.html#41deda72139584e5d8f2d6191387f0aa">00396</a> <a class="code" href="class_m_mat3x3.html#31c4291012e2002e0840a9d744c29f83">MMat3x3::operator ()</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j )<span class="keyword"> const</span>
<a name="l00397"></a>00397 <span class="keyword"></span>{
<a name="l00398"></a>00398         <a class="code" href="common__afx_8h.html#2630490ce4292ed6d05359d2957796b8">B_ASSERT</a>( i &lt; 3 );
<a name="l00399"></a>00399         <a class="code" href="common__afx_8h.html#2630490ce4292ed6d05359d2957796b8">B_ASSERT</a>( j &lt; 3 );
<a name="l00400"></a>00400         <span class="keywordflow">return</span> _data[ i*3+j ];
<a name="l00401"></a>00401 }
<a name="l00402"></a>00402 
<a name="l00403"></a>00403 <span class="comment">//----------------------------------------------------------</span>
<a name="l00405"></a>00405 <span class="comment"></span><a class="code" href="class_m_mat3x3.html" title="class MMat3x3">MMat3x3</a>
<a name="l00406"></a><a class="code" href="class_m_mat3x3.html#41ee55d1d606a5018fe404e0e4938b84">00406</a> <a class="code" href="class_m_mat3x3.html#41ee55d1d606a5018fe404e0e4938b84" title="performs a matrix multiply.">MMat3x3::operator * </a>( <span class="keyword">const</span> <a class="code" href="class_m_mat3x3.html" title="class MMat3x3">MMat3x3</a>&amp; mat )<span class="keyword"> const</span>
<a name="l00407"></a>00407 <span class="keyword"></span>{
<a name="l00408"></a>00408         <a class="code" href="class_m_mat3x3.html" title="class MMat3x3">MMat3x3</a> d( 0, 0, 0,
<a name="l00409"></a>00409                            0, 0, 0,
<a name="l00410"></a>00410                            0, 0, 0 );
<a name="l00411"></a>00411 
<a name="l00412"></a>00412         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; 3; ++i )
<a name="l00413"></a>00413         {
<a name="l00414"></a>00414                 <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j = 0; j &lt; 3; ++j )
<a name="l00415"></a>00415                 {
<a name="l00416"></a>00416                         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> k = 0; k &lt; 3; ++k )
<a name="l00417"></a>00417                         {
<a name="l00418"></a>00418                                 d( i, j ) += _data[ i * 3 + k ] * mat( k, j );
<a name="l00419"></a>00419 <span class="comment">//                              d( i, j ) += mat( i, k ) * _data[ k * 3 + j ];</span>
<a name="l00420"></a>00420                         }
<a name="l00421"></a>00421                 }
<a name="l00422"></a>00422         }
<a name="l00423"></a>00423         <span class="keywordflow">return</span> d;
<a name="l00424"></a>00424 <span class="comment">//      This data structure *MUST NOT* be 4-byte aligned due to GL calls!  That rules out MMX or SSE =( </span>
<a name="l00425"></a>00425 <span class="comment">/*      </span>
<a name="l00427"></a>00427 <span class="comment">        float *data1Ptr = _data;</span>
<a name="l00428"></a>00428 <span class="comment">        float *data2Ptr = mat._data;</span>
<a name="l00429"></a>00429 <span class="comment">        float *output = d._data;</span>
<a name="l00430"></a>00430 <span class="comment">        __asm</span>
<a name="l00431"></a>00431 <span class="comment">        {</span>
<a name="l00433"></a>00433 <span class="comment">                mov eax, data2Ptr;</span>
<a name="l00434"></a>00434 <span class="comment">                mov ebx, data1Ptr;</span>
<a name="l00435"></a>00435 <span class="comment">                mov edx, output;</span>
<a name="l00436"></a>00436 <span class="comment"></span>
<a name="l00438"></a>00438 <span class="comment">                movaps xmm1, [ ebx ];</span>
<a name="l00439"></a>00439 <span class="comment">                movaps xmm3, [ ebx+16 ];</span>
<a name="l00440"></a>00440 <span class="comment">                movaps xmm5, [ ebx+32 ];</span>
<a name="l00441"></a>00441 <span class="comment"></span>
<a name="l00444"></a>00444 <span class="comment">                movaps xmm0, [ eax ];                   //! load the first src row into xmm0.</span>
<a name="l00445"></a>00445 <span class="comment">                movaps xmm4, xmm0;</span>
<a name="l00446"></a>00446 <span class="comment">                movaps xmm2, xmm0;</span>
<a name="l00447"></a>00447 <span class="comment">                shufps xmm4, xmm4, 0xAA;</span>
<a name="l00448"></a>00448 <span class="comment">                shufps xmm2, xmm2, 0x55;</span>
<a name="l00449"></a>00449 <span class="comment">                shufps xmm0, xmm0, 0x00;        //! 0&lt;&lt;2 | 0&lt;&lt;0</span>
<a name="l00450"></a>00450 <span class="comment"></span>
<a name="l00452"></a>00452 <span class="comment">                mulps xmm0, xmm1;                       //! this( 0,0 ) * mat.row0</span>
<a name="l00453"></a>00453 <span class="comment">                mulps xmm2, xmm3;                       //! this( 0,1 ) * mat.row1</span>
<a name="l00454"></a>00454 <span class="comment">                mulps xmm4, xmm5;                       //! this( 0,2 ) * mat.row2</span>
<a name="l00455"></a>00455 <span class="comment">                addps xmm0, xmm2;</span>
<a name="l00456"></a>00456 <span class="comment">                addps xmm0, xmm4;</span>
<a name="l00457"></a>00457 <span class="comment"></span>
<a name="l00459"></a>00459 <span class="comment">                movaps [ edx ], xmm0;</span>
<a name="l00460"></a>00460 <span class="comment"></span>
<a name="l00463"></a>00463 <span class="comment">                movaps xmm0, [ eax+16 ];                        //! load the first src row into xmm0.</span>
<a name="l00464"></a>00464 <span class="comment">                movaps xmm4, xmm0;</span>
<a name="l00465"></a>00465 <span class="comment">                movaps xmm2, xmm0;</span>
<a name="l00466"></a>00466 <span class="comment">                shufps xmm4, xmm4, 0xAA;</span>
<a name="l00467"></a>00467 <span class="comment">                shufps xmm2, xmm2, 0x55;</span>
<a name="l00468"></a>00468 <span class="comment">                shufps xmm0, xmm0, 0x00;        //! 0&lt;&lt;2 | 0&lt;&lt;0</span>
<a name="l00469"></a>00469 <span class="comment"></span>
<a name="l00471"></a>00471 <span class="comment">                mulps xmm0, xmm1;                       //! this( 0,0 ) * mat.row0</span>
<a name="l00472"></a>00472 <span class="comment">                mulps xmm2, xmm3;                       //! this( 0,1 ) * mat.row1</span>
<a name="l00473"></a>00473 <span class="comment">                mulps xmm4, xmm5;                       //! this( 0,2 ) * mat.row2</span>
<a name="l00474"></a>00474 <span class="comment">                addps xmm0, xmm2;</span>
<a name="l00475"></a>00475 <span class="comment">                addps xmm0, xmm4;</span>
<a name="l00476"></a>00476 <span class="comment"></span>
<a name="l00478"></a>00478 <span class="comment">                movaps [ edx+16 ], xmm0;</span>
<a name="l00479"></a>00479 <span class="comment"></span>
<a name="l00482"></a>00482 <span class="comment">                movaps xmm0, [ eax+32 ];                        //! load the first src row into xmm0.</span>
<a name="l00483"></a>00483 <span class="comment">                movaps xmm4, xmm0;</span>
<a name="l00484"></a>00484 <span class="comment">                movaps xmm2, xmm0;</span>
<a name="l00485"></a>00485 <span class="comment">                shufps xmm4, xmm4, 0xAA;</span>
<a name="l00486"></a>00486 <span class="comment">                shufps xmm2, xmm2, 0x55;</span>
<a name="l00487"></a>00487 <span class="comment">                shufps xmm0, xmm0, 0x00;        //! 0&lt;&lt;2 | 0&lt;&lt;0</span>
<a name="l00488"></a>00488 <span class="comment"></span>
<a name="l00490"></a>00490 <span class="comment">                mulps xmm0, xmm1;                       //! this( 0,0 ) * mat.row0</span>
<a name="l00491"></a>00491 <span class="comment">                mulps xmm2, xmm3;                       //! this( 0,1 ) * mat.row1</span>
<a name="l00492"></a>00492 <span class="comment">                mulps xmm4, xmm5;                       //! this( 0,2 ) * mat.row2</span>
<a name="l00493"></a>00493 <span class="comment">                addps xmm0, xmm2;</span>
<a name="l00494"></a>00494 <span class="comment">                addps xmm0, xmm4;</span>
<a name="l00495"></a>00495 <span class="comment"></span>
<a name="l00497"></a>00497 <span class="comment">                movaps [ edx+32 ], xmm0;</span>
<a name="l00498"></a>00498 <span class="comment">        };</span>
<a name="l00499"></a>00499 <span class="comment"></span>
<a name="l00500"></a>00500 <span class="comment">        return d;</span>
<a name="l00501"></a>00501 <span class="comment">*/</span>
<a name="l00502"></a>00502 }
<a name="l00503"></a>00503 
<a name="l00504"></a>00504 <span class="comment">//----------------------------------------------------------</span>
<a name="l00505"></a>00505 <span class="keywordtype">void</span>
<a name="l00506"></a><a class="code" href="class_m_mat3x3.html#fda8bdfde06537ba03acee59fbffc41a">00506</a> <a class="code" href="class_m_mat3x3.html#fda8bdfde06537ba03acee59fbffc41a" title="saving and loading.">MMat3x3::Save</a>( <a class="code" href="class_u_writer.html" title="Purpose: To wrap and simplify pointer write operations.">UWriter</a>&amp; writer )<span class="keyword"> const</span>
<a name="l00507"></a>00507 <span class="keyword"></span>{
<a name="l00508"></a>00508         writer.<a class="code" href="class_u_writer.html#b70c7cb62e406390fb68ddbb22ad25e7">WriteFloat</a>( _data[ 0 ] );
<a name="l00509"></a>00509         writer.<a class="code" href="class_u_writer.html#b70c7cb62e406390fb68ddbb22ad25e7">WriteFloat</a>( _data[ 1 ] );
<a name="l00510"></a>00510         writer.<a class="code" href="class_u_writer.html#b70c7cb62e406390fb68ddbb22ad25e7">WriteFloat</a>( _data[ 2 ] );
<a name="l00511"></a>00511         writer.<a class="code" href="class_u_writer.html#b70c7cb62e406390fb68ddbb22ad25e7">WriteFloat</a>( _data[ 3 ] );
<a name="l00512"></a>00512         writer.<a class="code" href="class_u_writer.html#b70c7cb62e406390fb68ddbb22ad25e7">WriteFloat</a>( _data[ 4 ] );
<a name="l00513"></a>00513         writer.<a class="code" href="class_u_writer.html#b70c7cb62e406390fb68ddbb22ad25e7">WriteFloat</a>( _data[ 5 ] );
<a name="l00514"></a>00514         writer.<a class="code" href="class_u_writer.html#b70c7cb62e406390fb68ddbb22ad25e7">WriteFloat</a>( _data[ 6 ] );
<a name="l00515"></a>00515         writer.<a class="code" href="class_u_writer.html#b70c7cb62e406390fb68ddbb22ad25e7">WriteFloat</a>( _data[ 7 ] );
<a name="l00516"></a>00516         writer.<a class="code" href="class_u_writer.html#b70c7cb62e406390fb68ddbb22ad25e7">WriteFloat</a>( _data[ 8 ] );
<a name="l00517"></a>00517 }
<a name="l00518"></a>00518 
<a name="l00519"></a>00519 <span class="comment">//----------------------------------------------------------</span>
<a name="l00520"></a>00520 <span class="keywordtype">void</span>
<a name="l00521"></a><a class="code" href="class_m_mat3x3.html#00cd1ab58183f2bacce2e2e38ac77363">00521</a> <a class="code" href="class_m_mat3x3.html#00cd1ab58183f2bacce2e2e38ac77363">MMat3x3::Load</a>( <a class="code" href="class_u_reader.html" title="Purpose: To wrap and simplify pointer read operations.">UReader</a>&amp; reader )
<a name="l00522"></a>00522 {
<a name="l00523"></a>00523         _data[ 0 ] = reader.<a class="code" href="class_u_reader.html#4f6bada39ee0d8bb0378ff7aca8a842e">ReadFloat</a>();
<a name="l00524"></a>00524         _data[ 1 ] = reader.<a class="code" href="class_u_reader.html#4f6bada39ee0d8bb0378ff7aca8a842e">ReadFloat</a>();
<a name="l00525"></a>00525         _data[ 2 ] = reader.<a class="code" href="class_u_reader.html#4f6bada39ee0d8bb0378ff7aca8a842e">ReadFloat</a>();
<a name="l00526"></a>00526         _data[ 3 ] = reader.<a class="code" href="class_u_reader.html#4f6bada39ee0d8bb0378ff7aca8a842e">ReadFloat</a>();
<a name="l00527"></a>00527         _data[ 4 ] = reader.<a class="code" href="class_u_reader.html#4f6bada39ee0d8bb0378ff7aca8a842e">ReadFloat</a>();
<a name="l00528"></a>00528         _data[ 5 ] = reader.<a class="code" href="class_u_reader.html#4f6bada39ee0d8bb0378ff7aca8a842e">ReadFloat</a>();
<a name="l00529"></a>00529         _data[ 6 ] = reader.<a class="code" href="class_u_reader.html#4f6bada39ee0d8bb0378ff7aca8a842e">ReadFloat</a>();
<a name="l00530"></a>00530         _data[ 7 ] = reader.<a class="code" href="class_u_reader.html#4f6bada39ee0d8bb0378ff7aca8a842e">ReadFloat</a>();
<a name="l00531"></a>00531         _data[ 8 ] = reader.<a class="code" href="class_u_reader.html#4f6bada39ee0d8bb0378ff7aca8a842e">ReadFloat</a>();
<a name="l00532"></a>00532 }
<a name="l00533"></a>00533 
<a name="l00534"></a>00534 
<a name="l00535"></a>00535 <span class="comment">//==========================================================</span>
<a name="l00537"></a>00537 <span class="comment"></span><span class="comment">//==========================================================</span>
<a name="l00538"></a>00538 
<a name="l00539"></a>00539 <span class="comment">//----------------------------------------------------------</span>
<a name="l00540"></a>00540 <span class="keywordtype">void</span>
<a name="l00541"></a>00541 MMat3x3::Copy( <span class="keyword">const</span> <a class="code" href="class_m_mat3x3.html" title="class MMat3x3">MMat3x3</a>&amp; mat )
<a name="l00542"></a>00542 {
<a name="l00543"></a>00543         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; 9; ++i )
<a name="l00544"></a>00544         {
<a name="l00545"></a>00545                 _data[ i ] = mat.<a class="code" href="class_m_mat3x3.html#f50f70cc3edaa78841d6016093b1d479">_data</a>[ i ];
<a name="l00546"></a>00546         }
<a name="l00547"></a>00547 }
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Feb 13 17:19:48 2009 for Bootstrap Engine by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>

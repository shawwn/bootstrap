<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Bootstrap Engine: GrUberTexture Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>GrUberTexture Class Reference</h1><!-- doxytag: class="GrUberTexture" --><!-- doxytag: inherits="URefCount" -->class <a class="el" href="class_gr_uber_texture.html" title="class GrUberTexture">GrUberTexture</a>  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_gr_uber_texture_8h-source.html">GrUberTexture.h</a>&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for GrUberTexture:</div>
<div class="dynsection">

<p><center><img src="class_gr_uber_texture.png" usemap="#GrUberTexture_map" border="0" alt=""></center>
<map name="GrUberTexture_map">
<area href="class_u_ref_count.html" alt="URefCount" shape="rect" coords="0,0,95,24">
</map>
</div>

<p>
<a href="class_gr_uber_texture-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>SAtlasErase</b></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">atlas erase queue structure. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>STileData</b></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">tile data structure. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><b>STileKey</b></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">tile key structure. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_gr_uber_texture.html#cf01f354c19dd4a9b9f75f10a61ea3f7">ECONSTANTS</a> { <a class="el" href="class_gr_uber_texture.html#cf01f354c19dd4a9b9f75f10a61ea3f76604deb9de1a47ec948a512b8b4ee5f4">MAX_ATLAS_WRITES</a> =  4096
 }</td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_gr_uber_texture.html#8609b300da5232cf6e8ebdfe7b90aac5">GrUberTexture</a> (const <a class="el" href="class_u_path.html">UPath</a> &amp;filePath)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">class <a class="el" href="class_gr_uber_texture.html" title="class GrUberTexture">GrUberTexture</a>  <a href="#8609b300da5232cf6e8ebdfe7b90aac5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_gr_uber_texture.html#0e23ddce6edf3799c7f6674609f69161">GrUberTexture</a> (const <a class="el" href="class_u_path.html">UPath</a> &amp;filePath, const void *tileUsageBitmap, const char *metaData=0, unsigned int metaDataSize=0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_gr_uber_texture.html#56e4aea92ddd87bcf5b87915a6673513">~GrUberTexture</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_u_path.html">UPath</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_gr_uber_texture.html#09ce3a1b790e26b3e5ad49b04e56ec23">GetName</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">returns the name of the ubertexture.  <a href="#09ce3a1b790e26b3e5ad49b04e56ec23"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_gr_uber_texture.html#5ed66bd64c78acc1976f4819151a0d9c">IsValid</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">returns true if the ubertexture is valid.  <a href="#5ed66bd64c78acc1976f4819151a0d9c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_gr_uber_texture.html#066a12f3119df39f9d3ba6140f41f419">CacheDetailTiles</a> (unsigned int startMip, unsigned int <a class="el" href="wglext_8h.html#d77deca22f617d3f0e0eb786445689fc">x</a>, unsigned int <a class="el" href="wglext_8h.html#9298c7ad619074f5285b32c6b72bfdea">y</a>, unsigned int <a class="el" href="wglext_8h.html#e6531b1788ca42a9ae8155b0c52e7630">width</a>, unsigned int <a class="el" href="wglext_8h.html#b2e63df950c3789599e1e43f477bc9e3">height</a>, unsigned int clipMinX, unsigned int clipMinY, unsigned int clipMaxX, unsigned int clipMaxY)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">caches the detail tiles for rendering.  <a href="#066a12f3119df39f9d3ba6140f41f419"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_gr_uber_texture.html#13ff60984b63487fa9532e0668acafbb">BindLowResTextures</a> (unsigned int bumpSampler, unsigned int diffuseSampler, unsigned int specularSampler)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">binds the ubertexture lowres textures to the device.  <a href="#13ff60984b63487fa9532e0668acafbb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_gr_uber_texture.html#7052df4bf8cbc24f0e9ef47265fd5015">ResetAtlas</a> ()</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
class <a class="el" href="class_gr_uber_texture.html" title="class GrUberTexture">GrUberTexture</a> 
<p>Definition at line <a class="el" href="_gr_uber_texture_8h-source.html#l00025">25</a> of file <a class="el" href="_gr_uber_texture_8h-source.html">GrUberTexture.h</a>.</p>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="cf01f354c19dd4a9b9f75f10a61ea3f7"></a><!-- doxytag: member="GrUberTexture::ECONSTANTS" ref="cf01f354c19dd4a9b9f75f10a61ea3f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_gr_uber_texture.html#cf01f354c19dd4a9b9f75f10a61ea3f7">GrUberTexture::ECONSTANTS</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="cf01f354c19dd4a9b9f75f10a61ea3f76604deb9de1a47ec948a512b8b4ee5f4"></a><!-- doxytag: member="MAX_ATLAS_WRITES" ref="cf01f354c19dd4a9b9f75f10a61ea3f76604deb9de1a47ec948a512b8b4ee5f4" args="" -->MAX_ATLAS_WRITES</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>Definition at line <a class="el" href="_gr_uber_texture_8h-source.html#l00028">28</a> of file <a class="el" href="_gr_uber_texture_8h-source.html">GrUberTexture.h</a>.</p>

</div>
</div><p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="8609b300da5232cf6e8ebdfe7b90aac5"></a><!-- doxytag: member="GrUberTexture::GrUberTexture" ref="8609b300da5232cf6e8ebdfe7b90aac5" args="(const UPath &amp;filePath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GrUberTexture::GrUberTexture           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_u_path.html">UPath</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>filePath</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
class <a class="el" href="class_gr_uber_texture.html" title="class GrUberTexture">GrUberTexture</a> 
<p>
ctor &amp; dtor 
<p>
open an existing file.<p>
open the file.<p>
prepare the ubertexture database for reading.<p>
allocate resources.<p>
TODO: fill out the base mip levels. 
<p>Definition at line <a class="el" href="_gr_uber_texture_8cpp-source.html#l00063">63</a> of file <a class="el" href="_gr_uber_texture_8cpp-source.html">GrUberTexture.cpp</a>.</p>

</div>
</div><p>
<a class="anchor" name="0e23ddce6edf3799c7f6674609f69161"></a><!-- doxytag: member="GrUberTexture::GrUberTexture" ref="0e23ddce6edf3799c7f6674609f69161" args="(const UPath &amp;filePath, const void *tileUsageBitmap, const char *metaData=0, unsigned int metaDataSize=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GrUberTexture::GrUberTexture           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_u_path.html">UPath</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>filePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>tileUsageBitmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>metaData</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>metaDataSize</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
create a new file.<p>
open the file.<p>
create the ubertexture database.<p>
allocate resources.<p>
TODO: fill out the base mip levels. 
<p>Definition at line <a class="el" href="_gr_uber_texture_8cpp-source.html#l00086">86</a> of file <a class="el" href="_gr_uber_texture_8cpp-source.html">GrUberTexture.cpp</a>.</p>

</div>
</div><p>
<a class="anchor" name="56e4aea92ddd87bcf5b87915a6673513"></a><!-- doxytag: member="GrUberTexture::~GrUberTexture" ref="56e4aea92ddd87bcf5b87915a6673513" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GrUberTexture::~GrUberTexture           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
free textures.<p>
free the detail tile usage map.<p>
close the ubertexture.<p>
free the tile cache.<p>
free the tile locks.<p>
free the tile memory. 
<p>Definition at line <a class="el" href="_gr_uber_texture_8cpp-source.html#l00112">112</a> of file <a class="el" href="_gr_uber_texture_8cpp-source.html">GrUberTexture.cpp</a>.</p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="13ff60984b63487fa9532e0668acafbb"></a><!-- doxytag: member="GrUberTexture::BindLowResTextures" ref="13ff60984b63487fa9532e0668acafbb" args="(unsigned int bumpSampler, unsigned int diffuseSampler, unsigned int specularSampler)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GrUberTexture::BindLowResTextures           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>bumpSampler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>diffuseSampler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>specularSampler</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
binds the ubertexture lowres textures to the device. 
<p>

<p>
bind the low resolution textures to the device. 
<p>Definition at line <a class="el" href="_gr_uber_texture_8cpp-source.html#l00231">231</a> of file <a class="el" href="_gr_uber_texture_8cpp-source.html">GrUberTexture.cpp</a>.</p>

</div>
</div><p>
<a class="anchor" name="066a12f3119df39f9d3ba6140f41f419"></a><!-- doxytag: member="GrUberTexture::CacheDetailTiles" ref="066a12f3119df39f9d3ba6140f41f419" args="(unsigned int startMip, unsigned int x, unsigned int y, unsigned int width, unsigned int height, unsigned int clipMinX, unsigned int clipMinY, unsigned int clipMaxX, unsigned int clipMaxY)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GrUberTexture::CacheDetailTiles           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>startMip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>clipMinX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>clipMinY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>clipMaxX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>clipMaxY</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
caches the detail tiles for rendering. 
<p>
public methods. 
<p>
make sure the width and height are valid.<p>
try to find a free location in the detail cache.<p>
write to the atlas.<p>
iterate through each miplevel and pack data.<p>
calculate the tiles needed for the current mip-level.<p>
clip the current region.<p>
iterate through each tile.<p>
try to find the tile in the cache.<p>
cache the tile.<p>
upload the tile to the detail cache.<p>
get the chunk in the file where the tile resides.<p>
get the tile we're going to be replacing.<p>
make sure the tile isn't being loaded from disk.<p>
send a request for the tile data.<p>
now add a new item into the cache. 
<p>Definition at line <a class="el" href="_gr_uber_texture_8cpp-source.html#l00148">148</a> of file <a class="el" href="_gr_uber_texture_8cpp-source.html">GrUberTexture.cpp</a>.</p>

</div>
</div><p>
<a class="anchor" name="09ce3a1b790e26b3e5ad49b04e56ec23"></a><!-- doxytag: member="GrUberTexture::GetName" ref="09ce3a1b790e26b3e5ad49b04e56ec23" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_u_path.html">UPath</a>&amp; GrUberTexture::GetName           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
returns the name of the ubertexture. 
<p>

<p>Definition at line <a class="el" href="_gr_uber_texture_8h-source.html#l00039">39</a> of file <a class="el" href="_gr_uber_texture_8h-source.html">GrUberTexture.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="5ed66bd64c78acc1976f4819151a0d9c"></a><!-- doxytag: member="GrUberTexture::IsValid" ref="5ed66bd64c78acc1976f4819151a0d9c" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GrUberTexture::IsValid           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
returns true if the ubertexture is valid. 
<p>

<p>Definition at line <a class="el" href="_gr_uber_texture_8h-source.html#l00042">42</a> of file <a class="el" href="_gr_uber_texture_8h-source.html">GrUberTexture.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="7052df4bf8cbc24f0e9ef47265fd5015"></a><!-- doxytag: member="GrUberTexture::ResetAtlas" ref="7052df4bf8cbc24f0e9ef47265fd5015" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GrUberTexture::ResetAtlas           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
clears the detail cache atlas. This should be called at the beginning of each frame. 
<p>
get the current atlas memory.<p>
do a "spot cleanup" of the atlas if possible.<p>
clear the whole atlas. 
<p>Definition at line <a class="el" href="_gr_uber_texture_8cpp-source.html#l00242">242</a> of file <a class="el" href="_gr_uber_texture_8cpp-source.html">GrUberTexture.cpp</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>C:/Bootstrap/ProjectBX/Documentation/Code/Engine/Graphics/<a class="el" href="_gr_uber_texture_8h-source.html">GrUberTexture.h</a><li>C:/Bootstrap/ProjectBX/Documentation/Code/Engine/Graphics/<a class="el" href="_gr_uber_texture_8cpp-source.html">GrUberTexture.cpp</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Feb 13 17:20:06 2009 for Bootstrap Engine by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Bootstrap Engine: C:/Bootstrap/ProjectBX/Documentation/Code/Engine/Graphics/GrRenderbuffer.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>C:/Bootstrap/ProjectBX/Documentation/Code/Engine/Graphics/GrRenderbuffer.cpp</h1><a href="_gr_renderbuffer_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//----------------------------------------------------------</span>
<a name="l00006"></a>00006 <span class="comment"></span><span class="comment">//----------------------------------------------------------</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include "<a class="code" href="graphics__afx_8h.html">graphics_afx.h</a>"</span>
<a name="l00008"></a>00008 
<a name="l00010"></a>00010 <span class="preprocessor">#include "<a class="code" href="_gr_renderbuffer_8h.html">GrRenderbuffer.h</a>"</span>
<a name="l00011"></a>00011 
<a name="l00013"></a>00013 <span class="preprocessor">#include "<a class="code" href="_g_l_subsys_8h.html">GLSubsys.h</a>"</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> formatMap[ <a class="code" href="class_gr_renderbuffer.html#ebd137b0070a9c89e526afa508e2ad7abc7d1871818a6b63352e02cffe273a21">GrRenderbuffer::EF_COUNT</a> ] =
<a name="l00016"></a>00016 {
<a name="l00017"></a>00017         <a class="code" href="_g_l_8h.html#9f2854f4a91a0d83d2d54cb8110bfca4">GL_RGBA</a>,
<a name="l00018"></a>00018         <a class="code" href="_g_l_8h.html#335877d7ab34f0272e089159fc5833bc">GL_RGBA8</a>,
<a name="l00019"></a>00019         <a class="code" href="glext_8h.html#1d69388cec3ce265e2f930a9c7e301ac">GL_RGBA16F_ARB</a>,
<a name="l00020"></a>00020         <a class="code" href="glext_8h.html#3d25eb63c2737538513f7b6d7d6a051e">GL_RGBA32F_ARB</a>,
<a name="l00021"></a>00021         <a class="code" href="_g_l_8h.html#ac16527902deb1ddf6b84a9ce3da6e84">GL_DEPTH_COMPONENT</a>,
<a name="l00022"></a>00022         <a class="code" href="glext_8h.html#26b057c4fa415d8de41d43990828b0da">GL_DEPTH_COMPONENT16</a>,
<a name="l00023"></a>00023         <a class="code" href="glext_8h.html#d871b289b8410082db98e4b3af0301f1">GL_DEPTH_COMPONENT24</a>,
<a name="l00024"></a>00024         <a class="code" href="glext_8h.html#6962edce3c3764b8e7b354934e150e12">GL_DEPTH_STENCIL_EXT</a>,
<a name="l00025"></a>00025         <a class="code" href="glext_8h.html#977d93453dbd8b304989cbd9b1606490">GL_DEPTH24_STENCIL8_EXT</a>,
<a name="l00026"></a>00026 };
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="comment">//**********************************************************</span>
<a name="l00030"></a>00030 <span class="comment"></span><span class="comment">//**********************************************************</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="comment">//==========================================================</span>
<a name="l00034"></a>00034 <span class="comment"></span><span class="comment">//==========================================================</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="comment">//----------------------------------------------------------</span>
<a name="l00037"></a><a class="code" href="class_gr_renderbuffer.html#d185578b3293a38668ded97c908d7053">00037</a> <a class="code" href="class_gr_renderbuffer.html#d185578b3293a38668ded97c908d7053" title="class GrRenderbuffer">GrRenderbuffer::GrRenderbuffer</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_g_l_8h.html#e6531b1788ca42a9ae8155b0c52e7630">width</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_g_l_8h.html#b2e63df950c3789599e1e43f477bc9e3">height</a>, <a class="code" href="class_gr_renderbuffer.html#ebd137b0070a9c89e526afa508e2ad7a">EFORMAT</a> <a class="code" href="_g_l_8h.html#e2d3db041c6004a67047659b42f73a44">format</a> )
<a name="l00038"></a>00038 : _glHandle( 0 )
<a name="l00039"></a>00039 , _glHandle2( 0 )
<a name="l00040"></a>00040 , _width( width )
<a name="l00041"></a>00041 , _height( height )
<a name="l00042"></a>00042 , _format( format )
<a name="l00043"></a>00043 {
<a name="l00044"></a>00044         CreateRB();
<a name="l00045"></a>00045 }
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="comment">//----------------------------------------------------------</span>
<a name="l00048"></a><a class="code" href="class_gr_renderbuffer.html#e122e8cab34ef92c2e745f19b9174cce">00048</a> <a class="code" href="class_gr_renderbuffer.html#e122e8cab34ef92c2e745f19b9174cce">GrRenderbuffer::~GrRenderbuffer</a>()
<a name="l00049"></a>00049 {
<a name="l00050"></a>00050         DeleteRB();
<a name="l00051"></a>00051 }
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="comment">//==========================================================</span>
<a name="l00056"></a>00056 <span class="comment"></span><span class="comment">//==========================================================</span>
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="comment">//----------------------------------------------------------</span>
<a name="l00059"></a>00059 <span class="keywordtype">void</span>
<a name="l00060"></a><a class="code" href="class_gr_renderbuffer.html#a81a6b698cc1f560c2b5e98a101611c0">00060</a> <a class="code" href="class_gr_renderbuffer.html#a81a6b698cc1f560c2b5e98a101611c0" title="public methods.">GrRenderbuffer::BindToFramebuffer</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="glext_8h.html#d8f97111cc6514af5f352219d1cceb40">attachment</a> )
<a name="l00061"></a>00061 {
<a name="l00062"></a>00062         <span class="keywordflow">if</span> ( _emulatePackedFormat )
<a name="l00063"></a>00063         {
<a name="l00065"></a>00065                 <span class="keywordflow">if</span> ( attachment == <a class="code" href="glext_8h.html#44a68e4acac8d53163b052b77f574ad1">GL_STENCIL_ATTACHMENT_EXT</a> )
<a name="l00066"></a>00066                         <a class="code" href="_g_l_subsys_8cpp.html#dbe9122ccbc31cbe5570cfc3e0b7e859">bglFramebufferRenderbufferEXT</a>( <a class="code" href="glext_8h.html#e5a5d93368758da93a44c2fe8df29185">GL_FRAMEBUFFER_EXT</a>, attachment, <a class="code" href="glext_8h.html#b100b55f57703b4c81a56ff9acf2f74b">GL_RENDERBUFFER_EXT</a>, _glHandle2 );
<a name="l00067"></a>00067                 <span class="keywordflow">else</span>
<a name="l00068"></a>00068                         <a class="code" href="_g_l_subsys_8cpp.html#dbe9122ccbc31cbe5570cfc3e0b7e859">bglFramebufferRenderbufferEXT</a>( <a class="code" href="glext_8h.html#e5a5d93368758da93a44c2fe8df29185">GL_FRAMEBUFFER_EXT</a>, attachment, <a class="code" href="glext_8h.html#b100b55f57703b4c81a56ff9acf2f74b">GL_RENDERBUFFER_EXT</a>, _glHandle );        
<a name="l00069"></a>00069         }
<a name="l00070"></a>00070         <span class="keywordflow">else</span>
<a name="l00071"></a>00071         {
<a name="l00072"></a>00072                 <a class="code" href="_g_l_subsys_8cpp.html#dbe9122ccbc31cbe5570cfc3e0b7e859">bglFramebufferRenderbufferEXT</a>( <a class="code" href="glext_8h.html#e5a5d93368758da93a44c2fe8df29185">GL_FRAMEBUFFER_EXT</a>, attachment, <a class="code" href="glext_8h.html#b100b55f57703b4c81a56ff9acf2f74b">GL_RENDERBUFFER_EXT</a>, _glHandle );
<a name="l00073"></a>00073         }
<a name="l00074"></a>00074 }
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="comment">//----------------------------------------------------------</span>
<a name="l00077"></a>00077 <span class="keywordtype">void</span>
<a name="l00078"></a><a class="code" href="class_gr_renderbuffer.html#736aa66655242b21c01006ddbe8e83d1">00078</a> <a class="code" href="class_gr_renderbuffer.html#736aa66655242b21c01006ddbe8e83d1">GrRenderbuffer::PreContextReset</a>()
<a name="l00079"></a>00079 {
<a name="l00080"></a>00080         DeleteRB();
<a name="l00081"></a>00081 }
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="comment">//----------------------------------------------------------</span>
<a name="l00084"></a>00084 <span class="keywordtype">void</span>
<a name="l00085"></a><a class="code" href="class_gr_renderbuffer.html#b7d8c93051e190f086976ac103878890">00085</a> <a class="code" href="class_gr_renderbuffer.html#b7d8c93051e190f086976ac103878890">GrRenderbuffer::PostContextReset</a>()
<a name="l00086"></a>00086 {
<a name="l00087"></a>00087         CreateRB();
<a name="l00088"></a>00088 }
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="comment">//==========================================================</span>
<a name="l00093"></a>00093 <span class="comment"></span><span class="comment">//==========================================================</span>
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="comment">//----------------------------------------------------------</span>
<a name="l00096"></a>00096 <span class="keywordtype">void</span>
<a name="l00097"></a>00097 GrRenderbuffer::CreateRB()
<a name="l00098"></a>00098 {
<a name="l00099"></a>00099         <a class="code" href="_g_l_subsys_8h.html#ab12f88c1ad74a5b4876f37fcf105bda">CHECK_GL</a>();
<a name="l00100"></a>00100         _emulatePackedFormat = ( _format == <a class="code" href="class_gr_renderbuffer.html#ebd137b0070a9c89e526afa508e2ad7a8361959adca8d4e87bad86b4e3819333">EF_DEPTHSTENCIL</a> || _format == <a class="code" href="class_gr_renderbuffer.html#ebd137b0070a9c89e526afa508e2ad7a52be76eacab826da90c78ffdae436ec0">EF_DEPTH24STENCIL8</a> );
<a name="l00101"></a>00101         _emulatePackedFormat = _emulatePackedFormat &amp;&amp; !<a class="code" href="_g_l_subsys_8cpp.html#5ab057ffcdade303dc48d326eec6edce">IsExtSupported</a>( <span class="stringliteral">"GL_EXT_packed_depth_stencil"</span> );
<a name="l00102"></a>00102         <span class="keywordflow">if</span> ( _emulatePackedFormat )
<a name="l00103"></a>00103         {
<a name="l00104"></a>00104                 <a class="code" href="_g_l_subsys_8cpp.html#df25e7b74d3f6d2c2f77715fbcf23c25">bglGenRenderbuffersEXT</a>( 1, &amp;_glHandle );
<a name="l00105"></a>00105                 <a class="code" href="_g_l_subsys_8cpp.html#a9e64cff4073239ceb0680be6e1c4ca2">bglBindRenderbufferEXT</a>( <a class="code" href="glext_8h.html#b100b55f57703b4c81a56ff9acf2f74b">GL_RENDERBUFFER_EXT</a>, _glHandle );
<a name="l00106"></a>00106                 <a class="code" href="_g_l_subsys_8cpp.html#5d41ab68dc895234791bfa7b524e78c2">bglRenderbufferStorageEXT</a>( <a class="code" href="glext_8h.html#b100b55f57703b4c81a56ff9acf2f74b">GL_RENDERBUFFER_EXT</a>, <a class="code" href="_g_l_8h.html#ac16527902deb1ddf6b84a9ce3da6e84">GL_DEPTH_COMPONENT</a>, _width, _height );
<a name="l00107"></a>00107 
<a name="l00108"></a>00108                 <a class="code" href="_g_l_subsys_8cpp.html#df25e7b74d3f6d2c2f77715fbcf23c25">bglGenRenderbuffersEXT</a>( 1, &amp;_glHandle2 );
<a name="l00109"></a>00109                 <a class="code" href="_g_l_subsys_8cpp.html#a9e64cff4073239ceb0680be6e1c4ca2">bglBindRenderbufferEXT</a>( <a class="code" href="glext_8h.html#b100b55f57703b4c81a56ff9acf2f74b">GL_RENDERBUFFER_EXT</a>, _glHandle2 );
<a name="l00110"></a>00110                 <a class="code" href="_g_l_subsys_8cpp.html#5d41ab68dc895234791bfa7b524e78c2">bglRenderbufferStorageEXT</a>( <a class="code" href="glext_8h.html#b100b55f57703b4c81a56ff9acf2f74b">GL_RENDERBUFFER_EXT</a>, <a class="code" href="_g_l_8h.html#f9016daf399ea692604a6fc68653b8e3">GL_STENCIL_INDEX</a>, _width, _height );
<a name="l00111"></a>00111         }
<a name="l00112"></a>00112         <span class="keywordflow">else</span>
<a name="l00113"></a>00113         {
<a name="l00114"></a>00114                 <a class="code" href="_g_l_subsys_8cpp.html#df25e7b74d3f6d2c2f77715fbcf23c25">bglGenRenderbuffersEXT</a>( 1, &amp;_glHandle );
<a name="l00115"></a>00115                 <a class="code" href="_g_l_subsys_8cpp.html#a9e64cff4073239ceb0680be6e1c4ca2">bglBindRenderbufferEXT</a>( <a class="code" href="glext_8h.html#b100b55f57703b4c81a56ff9acf2f74b">GL_RENDERBUFFER_EXT</a>, _glHandle );
<a name="l00116"></a>00116                 <a class="code" href="_g_l_subsys_8cpp.html#5d41ab68dc895234791bfa7b524e78c2">bglRenderbufferStorageEXT</a>( <a class="code" href="glext_8h.html#b100b55f57703b4c81a56ff9acf2f74b">GL_RENDERBUFFER_EXT</a>, formatMap[ _format ], _width, _height );
<a name="l00117"></a>00117         }
<a name="l00118"></a>00118         <a class="code" href="_g_l_subsys_8h.html#ab12f88c1ad74a5b4876f37fcf105bda">CHECK_GL</a>();
<a name="l00119"></a>00119 }
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 <span class="comment">//----------------------------------------------------------</span>
<a name="l00122"></a>00122 <span class="keywordtype">void</span>
<a name="l00123"></a>00123 GrRenderbuffer::DeleteRB()
<a name="l00124"></a>00124 {
<a name="l00125"></a>00125         <a class="code" href="_g_l_subsys_8cpp.html#33c16cbebf5d070c656b1f27edc66d99">bglDeleteRenderbuffersEXT</a>( 1, &amp;_glHandle );
<a name="l00126"></a>00126         <span class="keywordflow">if</span> ( _glHandle2 )
<a name="l00127"></a>00127                 <a class="code" href="_g_l_subsys_8cpp.html#33c16cbebf5d070c656b1f27edc66d99">bglDeleteRenderbuffersEXT</a>( 1, &amp;_glHandle2 );
<a name="l00128"></a>00128 }
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Feb 13 17:19:57 2009 for Bootstrap Engine by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
